/*1347282158,178142517*/

if (window.CavalryLogger) { CavalryLogger.start_js(["FzC8D"]); }

__d("UserAgent",[],function(a,b,c,d,e,f){var g=false,h,i,j,k,l,m,n,o,p,q,r,s,t,u;function v(){if(g)return;g=true;var x=navigator.userAgent,y=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(x),z=/(Mac OS X)|(Windows)|(Linux)/.exec(x);r=/\b(iPhone|iP[ao]d)/.exec(x);s=/\b(iP[ao]d)/.exec(x);p=/Android/i.exec(x);t=/FBAN\/\w+;/i.exec(x);u=/Mobile/i.exec(x);q=!!(/Win64/.exec(x));if(y){h=y[1]?parseFloat(y[1]):NaN;if(h&&document.documentMode)h=document.documentMode;i=y[2]?parseFloat(y[2]):NaN;j=y[3]?parseFloat(y[3]):NaN;k=y[4]?parseFloat(y[4]):NaN;if(k){y=/(?:Chrome\/(\d+\.\d+))/.exec(x);l=y&&y[1]?parseFloat(y[1]):NaN;}else l=NaN;}else h=i=j=l=k=NaN;if(z){if(z[1]){var aa=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(x);m=aa?parseFloat(aa[1].replace('_','.')):true;}else m=false;n=!!z[2];o=!!z[3];}else m=n=o=false;}var w={ie:function(){return v()||h;},ie64:function(){return w.ie()&&q;},firefox:function(){return v()||i;},opera:function(){return v()||j;},safari:function(){return v()||k;},chrome:function(){return v()||l;},windows:function(){return v()||n;},osx:function(){return v()||m;},linux:function(){return v()||o;},iphone:function(){return v()||r;},mobile:function(){return v()||(r||s||p||u);},nativeApp:function(){return v()||t;},android:function(){return v()||p;},ipad:function(){return v()||s;}};e.exports=w;});
__d("FBDesktopDetect",["UserAgent"],function(a,b,c,d,e,f){var g=b('UserAgent'),h='facebook.desktopplugin',i={mimeType:'application/x-facebook-desktop-1',isPluginInstalled:function(){if(g.osx())return false;var j=null;if(a.ActiveXObject){try{j=new a.ActiveXObject(h);if(j)return true;}catch(k){}}else if(a.navigator&&a.navigator.plugins){a.navigator.plugins.refresh(false);for(var l=0,m=a.navigator.plugins.length;l<m;l++){j=a.navigator.plugins[l];if(j.length&&j[0].type===this.mimeType)return true;}}return false;}};e.exports=i;});
__d("Cookie",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h={set:function(i,j,k,l,m){if(g.no_cookies&&i!='tpa')return;document.cookie=i+"="+encodeURIComponent(j)+"; "+(k?"expires="+(new Date(Date.now()+k)).toGMTString()+"; ":"")+"path="+(l||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1')+(m?"; secure":"");},clear:function(i,j){j=j||'/';document.cookie=i+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path="+j+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},get:function(i){var j=document.cookie.match('(?:^|;\\s*)'+i+'=(.*?)(?:;|$)');return (j?decodeURIComponent(j[1]):j);}};e.exports=h;});
__d("legacy:cookie",["Cookie"],function(a,b,c,d){var e=b('Cookie');a.getCookie=e.get;a.setCookie=e.set;a.clearCookie=e.clear;},3);
__d("URI",["copyProperties","goURI"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('goURI');function i(j){if(!(this instanceof i))return new i(j||window.location.href);this.parse(j||'');}g(i,{getRequestURI:function(j,k){j=j===undefined||j;var l=a.PageTransitions;if(j&&l&&l.isInitialized()){return l.getCurrentURI(!!k).getQualifiedURI();}else return new i(window.location.href);},getMostRecentURI:function(){var j=a.PageTransitions;if(j&&j.isInitialized()){return j.getMostRecentURI().getQualifiedURI();}else return new i(window.location.href);},getNextURI:function(){var j=a.PageTransitions;if(j&&j.isInitialized()){return j.getNextURI().getQualifiedURI();}else return new i(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(j){if(!j)return {};var k={};j=j.replace(/%5B/ig,'[').replace(/%5D/ig,']');j=j.split('&');var l=Object.prototype.hasOwnProperty;for(var m=0,n=j.length;m<n;m++){var o=j[m].match(i.arrayQueryExpression);if(!o){var p=j[m].split('=');k[i.decodeComponent(p[0])]=p[1]===undefined?null:i.decodeComponent(p[1]);}else{var q=o[2].split(/\]\[|\[|\]/).slice(0,-1),r=o[1],s=i.decodeComponent(o[3]||'');q[0]=r;var t=k;for(var u=0;u<q.length-1;u++)if(q[u]){if(!l.call(t,q[u])){var v=q[u+1]&&!q[u+1].match(/^\d+$/)?{}:[];t[q[u]]=v;if(t[q[u]]!==v)return k;}t=t[q[u]];}else{if(q[u+1]&&!q[u+1].match(/^\d+$/)){t.push({});}else t.push([]);t=t[t.length-1];}if(t instanceof Array&&q[q.length-1]===''){t.push(s);}else t[q[q.length-1]]=s;}}return k;},implodeQuery:function(j,k,l){k=k||'';if(l===undefined)l=true;var m=[];if(j===null||j===undefined){m.push(l?i.encodeComponent(k):k);}else if(j instanceof Array){for(var n=0;n<j.length;++n)try{if(j[n]!==undefined)m.push(i.implodeQuery(j[n],k?(k+'['+n+']'):n,l));}catch(o){}}else if(typeof(j)=='object'){if(('nodeName' in j)&&('nodeType' in j)){m.push('{node}');}else for(var p in j)try{if(j[p]!==undefined)m.push(i.implodeQuery(j[p],k?(k+'['+p+']'):p,l));}catch(o){}}else if(l){m.push(i.encodeComponent(k)+'='+i.encodeComponent(j));}else m.push(k+'='+j);return m.join('&');},encodeComponent:function(j){return encodeURIComponent(j).replace(/%5D/g,"]").replace(/%5B/g,"[");},decodeComponent:function(j){return decodeURIComponent(j.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',INVALID_URI:{protocol:'',domain:'',port:'',path:'',query_s:'',fragment:''},sanitizeDomain:function(j){var k=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(k.test(j)){return i.INVALID_DOMAIN;}else return j;}});g(i.prototype,{parse:function(j){var k=j.toString().match(i.expression);g(this,{protocol:k[3]||'',domain:i.sanitizeDomain(k[4]||''),port:k[6]||'',path:k[7]||'',query_s:k[9]||'',fragment:k[11]||''});if(!this.domain&&this.path.indexOf('\\')!==-1)g(this,i.INVALID_URI);var l=new RegExp('^(?:[^/]*:|'+'[\\x00-\\x1f]*/[\\x00-\\x1f]*/)');if(!this.protocol&&l.test(j.toString()))g(this,i.INVALID_URI);return this;},setProtocol:function(j){this.protocol=j;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(j){this.query_s=i.implodeQuery(j);return this;},addQueryData:function(j){return this.setQueryData(g(this.getQueryData(),j));},removeQueryData:function(j){if(!Array.isArray(j))j=[j];var k=this.getQueryData();for(var l=0,m=j.length;l<m;++l)delete k[j[l]];return this.setQueryData(k);},getQueryData:function(){return i.explodeQuery(this.query_s);},setFragment:function(j){this.fragment=j;return this;},getFragment:function(){return this.fragment;},setDomain:function(j){this.domain=i.sanitizeDomain(j);return this;},getDomain:function(){return this.domain;},setPort:function(j){this.port=j;return this;},getPort:function(){return this.port;},setPath:function(j){this.path=j;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var j='';this.protocol&&(j+=this.protocol+'://');this.domain&&(j+=this.domain);this.port&&(j+=':'+this.port);if(this.domain&&!this.path)j+='/';this.path&&(j+=this.path);this.query_s&&(j+='?'+this.query_s);this.fragment&&(j+='#'+this.fragment);return j;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!i._facebookURIRegex)i._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.isEmpty()&&(!this.domain||i._facebookURIRegex.test(this.domain)));},isQuicklingEnabled:function(){var j=a.Quickling;return j&&j.isActive()&&j.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var j=this.domain.split('.'),k=j.indexOf('facebook');return j.slice(k).join('.');},getUnqualifiedURI:function(){return new i(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var j=new i(this);if(!j.getDomain()){var k=i();j.setProtocol(k.getProtocol()).setDomain(k.getDomain()).setPort(k.getPort());}return j;},isSameOrigin:function(j){var k=j||window.location.href;if(!(k instanceof i))k=new i(k.toString());if(this.isEmpty()||k.isEmpty())return false;if(this.getDomain()===i.INVALID_DOMAIN)return false;if(this.getProtocol()&&this.getProtocol()!=k.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=k.getDomain())return false;if(this.getPort()&&this.getPort()!=k.getPort())return false;return true;},go:function(j){h(this,j);},setSubdomain:function(j){var k=new i(this).getQualifiedURI(),l=k.getDomain().split('.');if(l.length<=2){l.unshift(j);}else l[0]=j;return k.setDomain(l.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var j=this.getDomain().split('.');if(j.length<=2){return '';}else return j[0];},setSecure:function(j){return this.setProtocol(j?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.exports=i;});
__d("AsyncSignal",["Env","ErrorUtils","QueryString","URI","XHR","copyProperties"],function(a,b,c,d,e,f){var g=b('Env'),h=b('ErrorUtils'),i=b('QueryString'),j=b('URI'),k=b('XHR'),l=b('copyProperties');function m(n,o){this.data=o||{};if(g.tracking_domain&&n.charAt(0)=='/')n=g.tracking_domain+n;this.uri=n;}m.prototype.setHandler=function(n){this.handler=n;return this;};m.prototype.send=function(){var n=this.handler,o=this.data,p=new Image();if(n)p.onload=p.onerror=function(){h.applyWithGuard(n,null,[p.height==1]);};o.asyncSignal=(Math.random()*10000|0)+1;var q=new j(this.uri).isFacebookURI();l(o,k.getAsyncParams(q?'POST':'GET'));p.src=i.appendToUrl(this.uri,o);return this;};e.exports=m;});
__d("legacy:async-signal",["AsyncSignal"],function(a,b,c,d){a.AsyncSignal=b('AsyncSignal');},3);
__d("legacy:uri",["URI"],function(a,b,c,d){a.URI=b('URI');},3);
function detect_broken_proxy_cache(a,b){var c=getCookie(b);if((c!=a)&&(c!=null)&&(a!='0')){var d={c:'si_detect_broken_proxy_cache',m:b+' '+a+' '+c},e=new URI('/common/scribe_endpoint.php').getQualifiedURI().toString();new AsyncSignal(e,d).send();}}
__d("NavigationMessage",[],function(a,b,c,d,e,f){var g={NAVIGATION_BEGIN:'NavigationMessage/navigationBegin',NAVIGATION_SELECT:'NavigationMessage/navigationSelect',NAVIGATION_FIRST_RESPONSE:'NavigationMessage/navigationFirstResponse',NAVIGATION_COMPLETED:'NavigationMessage/navigationCompleted',NAVIGATION_FAILED:'NavigationMessage/navigationFailed',NAVIGATION_COUNT_UPDATE:'NavigationMessage/navigationCount',NAVIGATION_FAVORITE_UPDATE:'NavigationMessage/navigationFavoriteUpdate',NAVIGATION_ITEM_REMOVED:'NavigationMessage/navigationItemRemoved',NAVIGATION_ITEM_HIDDEN:'NavigationMessage/navigationItemHidden',INTERNAL_LOADING_BEGIN:'NavigationMessage/internalLoadingBegin',INTERNAL_LOADING_COMPLETED:'NavigationMessage/internalLoadingCompleted'};e.exports=g;});
__d("legacy:ui-side-nav-message",["NavigationMessage"],function(a,b,c,d){a.NavigationMessage=b('NavigationMessage');},3);
__d("createObjectFrom",["hasArrayNature"],function(a,b,c,d,e,f){var g=b('hasArrayNature');function h(i,j){var k={},l=g(j);if(typeof j=='undefined')j=true;for(var m=i.length;m--;)k[i[m]]=l?j[m]:j;return k;}e.exports=h;});
__d("DOMQuery",["CSS","UserAgent","createArrayFrom","createObjectFrom","ge"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('UserAgent'),i=b('createArrayFrom'),j=b('createObjectFrom'),k=b('ge'),l=null,m={find:function(n,o){var p=m.scry(n,o);return p[0];},scry:function(n,o){if(!n||!n.getElementsByTagName)return [];var p=o.split(' '),q=[n];for(var r=0;r<p.length;r++){if(q.length===0)break;if(p[r]==='')continue;var s=p[r],t=p[r],u=[],v=false;if(s.charAt(0)=='^')if(r===0){v=true;s=s.slice(1);}else return [];s=s.replace(/\./g,' .');s=s.replace(/\#/g,' #');s=s.replace(/\[/g,' [');var w=s.split(' '),x=w[0]||'*',y=x=='*',z=w[1]&&w[1].charAt(0)=='#';if(z){var aa=k(w[1].slice(1),true);if(aa&&(y||aa.tagName.toLowerCase()==x))for(var ba=0;ba<q.length;ba++)if(v&&m.contains(aa,q[ba])){u=[aa];break;}else if(document==q[ba]||m.contains(q[ba],aa)){u=[aa];break;}}else{var ca=[],da=q.length,ea,fa=!v&&t.indexOf('[')<0&&document.querySelectorAll;for(var ga=0;ga<da;ga++){if(v){ea=[];var ha=q[ga].parentNode;while(m.isElementNode(ha)){if(y||ha.tagName.toLowerCase()==x)ea.push(ha);ha=ha.parentNode;}}else if(fa){ea=q[ga].querySelectorAll(t);}else ea=q[ga].getElementsByTagName(x);var ia=ea.length;for(var ja=0;ja<ia;ja++)ca.push(ea[ja]);}if(!fa)for(var ka=1;ka<w.length;ka++){var la=w[ka],ma=la.charAt(0)=='.',na=la.substring(1);for(ga=0;ga<ca.length;ga++){var oa=ca[ga];if(!oa)continue;if(ma){if(!g.hasClass(oa,na))delete ca[ga];continue;}else{var pa=la.slice(1,la.length-1);if(pa.indexOf('=')==-1){if(oa.getAttribute(pa)===null){delete ca[ga];continue;}}else{var qa=pa.split('='),ra=qa[0],sa=qa[1];sa=sa.slice(1,sa.length-1);if(oa.getAttribute(ra)!=sa){delete ca[ga];continue;}}}}}for(ga=0;ga<ca.length;ga++)if(ca[ga]){u.push(ca[ga]);if(v)break;}}q=u;}return q;},getText:function(n){if(m.isTextNode(n)){return n.data;}else if(m.isElementNode(n)){if(l===null){var o=document.createElement('div');l=o.textContent!=null?'textContent':'innerText';}return n[l];}else return '';},getSelection:function(){var n=window.getSelection,o=document.selection;if(n){return n()+'';}else if(o)return o.createRange().text;return null;},contains:function(n,o){n=k(n);o=k(o);if(!n||!o){return false;}else if(n===o){return true;}else if(m.isTextNode(n)){return false;}else if(m.isTextNode(o)){return m.contains(n,o.parentNode);}else if(n.contains){return n.contains(o);}else if(n.compareDocumentPosition){return !!(n.compareDocumentPosition(o)&16);}else return false;},getRootElement:function(){var n=null;if(window.Quickling&&Quickling.isActive())n=k('content');return n||document.body;},isNode:function(n){return !!(n&&(typeof Node=='object'?n instanceof Node:typeof n=="object"&&typeof n.nodeType=='number'&&typeof n.nodeName=='string'));},isNodeOfType:function(n,o){var p=i(o).join('|').toUpperCase().split('|'),q=j(p);return m.isNode(n)&&n.nodeName in q;},isElementNode:function(n){return m.isNode(n)&&n.nodeType==1;},isTextNode:function(n){return m.isNode(n)&&n.nodeType==3;},getDocumentScrollElement:function(n){n=n||document;var o=h.chrome()||h.safari();return !o&&n.compatMode==='CSS1Compat'?n.documentElement:n.body;}};e.exports=m;});
__d("Style",["DOMQuery","ErrorUtils","$"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('ErrorUtils'),i=b('$');function j(m){return m.replace(/([A-Z])/g,'-$1').toLowerCase();}function k(m,n){var o=l.get(m,n);return (o==='auto'||o==='scroll');}var l={set:function(m,n,o){switch(n){case 'opacity':m.style.opacity=o;m.style.filter=o!==''?'alpha(opacity='+o*100+')':'';break;case 'float':m.style.cssFloat=m.style.styleFloat=o;break;case 'width':case 'height':if(parseInt(o,10)<0)h.applyWithGuard(function(q,r){throw new Error('Style.set: "'+q+'" argument is invalid: "'+r+'"');},l,[n,o]);default:n=n.replace(/-(.)/g,function(q,r){return r.toUpperCase();});try{m.style[n]=o;}catch(p){throw new Error('Style.set: "'+n+'" argument is invalid: "'+o+'"');}}return m;},get:function(m,n){m=i(m);n=n.replace(/-(.)/g,function(p,q){return q.toUpperCase();});var o;if(window.getComputedStyle){o=window.getComputedStyle(m,null);if(o)return o.getPropertyValue(j(n));}if(document.defaultView&&document.defaultView.getComputedStyle){o=document.defaultView.getComputedStyle(m,null);if(o)return o.getPropertyValue(j(n));if(n=="display")return "none";}if(m.currentStyle)return m.currentStyle[n];return m.style&&m.style[n];},getFloat:function(m,n){return parseFloat(l.get(m,n),10);},getOpacity:function(m){m=i(m);var n=l.get(m,'filter'),o=null;if(n&&(o=/(\d+(?:\.\d+)?)/.exec(n))){return parseFloat(o.pop())/100;}else if(n=l.get(m,'opacity')){return parseFloat(n);}else return 1;},isFixed:function(m){while(m&&m!==document.documentElement){if(l.get(m,'position')==='fixed')return true;m=m.parentNode;}return false;},getScrollParent:function(m){if(!m)return null;while(m!==document.body){if(k(m,'overflow')||k(m,'overflowY')||k(m,'overflowX'))return m;m=m.parentNode;}return window;}};e.exports=l;});
__d("legacy:Style",["Style"],function(a,b,c,d){a.Style=b('Style');},3);
__d("LinkshimAsyncLink",["$","AsyncSignal"],function(a,b,c,d,e,f){var g=b('$'),h=b('AsyncSignal'),i={swap:function(j,k){j.href=k;},referrer_log:function(j,k,l){var m=g('meta_referrer');m.content="origin";i.swap(j,k);(function(){m.content="default";new h(l,{}).send();}).defer(100);}};e.exports=i;});
__d("legacy:dom-asynclinkshim",["LinkshimAsyncLink"],function(a,b,c,d){a.LinkshimAsyncLink=b('LinkshimAsyncLink');},3);
__d("legacy:css",["CSS"],function(a,b,c,d){a.CSS=b('CSS');},3);
__d("DataStore",[],function(a,b,c,d,e,f){var g={},h=1;function i(l){if(typeof l=='string'){return 'str_'+l;}else return 'elem_'+(l.__FB_TOKEN||(l.__FB_TOKEN=[h++]))[0];}function j(l){var m=i(l);return g[m]||(g[m]={});}var k={set:function(l,m,n){if(!l)throw new TypeError('DataStore.set: namespace is required, got '+(typeof l));var o=j(l);o[m]=n;return l;},get:function(l,m,n){if(!l)throw new TypeError('DataStore.get: namespace is required, got '+(typeof l));var o=j(l),p=o[m];if(typeof p==='undefined'&&l.getAttribute)if(l.hasAttribute&&!l.hasAttribute('data-'+m)){p=undefined;}else{var q=l.getAttribute('data-'+m);p=(null===q)?undefined:q;}if((n!==undefined)&&(p===undefined))p=o[m]=n;return p;},remove:function(l,m){if(!l)throw new TypeError('DataStore.remove: namespace is required, got '+(typeof l));var n=j(l),o=n[m];delete n[m];return o;},purge:function(l){delete g[i(l)];}};e.exports=k;});
__d("DOMEvent",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this.event=i||window.event;this.target=this.event.target||this.event.srcElement;}g(h.prototype,{preventDefault:function(){var i=this.event;i.preventDefault?i.preventDefault():i.returnValue=false;return this;},stopPropagation:function(){var i=this.event;i.stopPropagation?i.stopPropagation():i.cancelBubble=true;return this;},kill:function(){this.stopPropagation().preventDefault();return this;}});e.exports=h;});
__d("getObjectValues",["hasArrayNature"],function(a,b,c,d,e,f){var g=b('hasArrayNature');function h(i){var j=[];for(var k in i)j.push(i[k]);return j;}e.exports=h;});
__d("event-extensions",["event-form-bubbling","DataStore","DOMQuery","DOMEvent","ErrorUtils","Parent","UserAgent","$","copyProperties","getObjectValues"],function(a,b,c,d,e,f){b('event-form-bubbling');var g=b('DataStore'),h=b('DOMQuery'),i=b('DOMEvent'),j=b('ErrorUtils'),k=b('Parent'),l=b('UserAgent'),m=b('$'),n=b('copyProperties'),o=b('getObjectValues');Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function p(y,z,aa){this.target=y;this.type=z;this.data=aa;}n(p.prototype,{getData:function(){this.data=this.data||{};return this.data;},stop:function(){new i(this).stopPropagation();return this;},prevent:function(){new i(this).preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){return new i(this).target||null;}});function q(y){if(y instanceof p)return y;if(!y)if(!window.addEventListener&&document.createEventObject){y=window.event?document.createEventObject(window.event):{};}else y={};if(!y._inherits_from_prototype)for(var z in Event.prototype)try{y[z]=Event.prototype[z];}catch(aa){}return y;}n(Event.prototype,{_inherits_from_prototype:true,getRelatedTarget:function(){var y=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return y?m(y):null;},getModifiers:function(){var y={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};y.access=l.osx()?y.control:y.alt;y.any=y.control||y.shift||y.alt||y.meta;return y;},isRightClick:function(){if(this.which)return this.which===3;return this.button&&this.button===2;},isMiddleClick:function(){if(this.which)return this.which===2;return this.button&&this.button===4;},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick();}});n(Event.prototype,p.prototype);n(Event,{listen:function(y,z,aa,ba){if(typeof y=='string')y=m(y);if(typeof ba=='undefined')ba=Event.Priority.NORMAL;if(typeof z=='object'){var ca={};for(var da in z)ca[da]=Event.listen(y,da,z[da],ba);return ca;}if(z.match(/^on/i))throw new TypeError("Bad event name `"+z+"': use `click', not `onclick'.");if(y.nodeName=='LABEL'&&z=='click'){var ea=y.getElementsByTagName('input');y=ea.length==1?ea[0]:y;}else if(y===window&&z==='scroll'){var fa=h.getDocumentScrollElement();if(fa!==document.documentElement&&fa!==document.body)y=fa;}var ga=g.get(y,s,{});if(u[z]){var ha=u[z];z=ha.base;aa=ha.wrap(aa);}v(y,z);var ia=ga[z];if(!(ba in ia))ia[ba]=[];var ja=ia[ba].length,ka=new x(aa,ia[ba],ja);ia[ba].push(ka);return ka;},stop:function(y){new i(y).stopPropagation();return y;},prevent:function(y){new i(y).preventDefault();return y;},kill:function(y){new i(y).kill();return false;},getKeyCode:function(event){event=new i(event).event;if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!r){var y=o(Event.Priority);y.sort(function(z,aa){return z-aa;});r=y;}return r;},fire:function(y,z,aa){var ba=new p(y,z,aa),ca;do{var da=Event.__getHandler(y,z);if(da)ca=da(ba);y=y.parentNode;}while(y&&ca!==false&&!ba.cancelBubble);return ca!==false;},__fire:function(y,z,event){var aa=Event.__getHandler(y,z);if(aa)return aa(q(event));},__getHandler:function(y,z){return g.get(y,Event.DATASTORE_KEY+z);},getPosition:function(y){y=new i(y).event;var z=h.getDocumentScrollElement(),aa=y.clientX+z.scrollLeft,ba=y.clientY+z.scrollTop;return {x:aa,y:ba};}});var r=null,s=Event.DATASTORE_KEY,t=function(y){return function(z){if(!h.contains(this,z.getRelatedTarget()))return y.call(this,z);};},u={mouseenter:{base:'mouseover',wrap:t},mouseleave:{base:'mouseout',wrap:t}},v=function(y,z){var aa='on'+z,ba=w.bind(y),ca=g.get(y,s);if(z in ca)return;ca[z]={};if(y.addEventListener){y.addEventListener(z,ba,false);}else if(y.attachEvent)y.attachEvent(aa,ba);g.set(y,s+z,ba);if(y[aa]){var da=y===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL,ea=y[aa];y[aa]=null;Event.listen(y,z,ea,da);}if(y.nodeName==='FORM'&&z==='submit')Event.listen(y,z,Event.__bubbleSubmit.curry(y),Event.Priority._BUBBLE);},w=j.guard(function(event){event=q(event);var y=event.type;if(!g.get(this,s))throw new Error("Bad listenHandler context.");var z=g.get(this,s)[y];if(!z)throw new Error("No registered handlers for `"+y+"'.");if(y=='click'){var aa=k.byTag(event.getTarget(),'a');if(window.userAction){var ba=window.userAction('evt_ext',aa,event,{mode:'DEDUP'}).uai_fallback('click');if(window.ArbiterMonitor)window.ArbiterMonitor.initUA(ba,[aa]);}if(window.clickRefAction)window.clickRefAction('click',aa,event);}var ca=Event.getPriorities();for(var da=0;da<ca.length;da++){var ea=ca[da];if(ea in z){var fa=z[ea];for(var ga=0;ga<fa.length;ga++){if(!fa[ga])continue;var ha=fa[ga].fire(this,event);if(ha===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;});Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function x(y,z,aa){this._handler=y;this._container=z;this._index=aa;}n(x.prototype,{remove:function(){delete this._handler;delete this._container[this._index];},fire:function(y,event){return j.applyWithGuard(this._handler,y,[event],function(z){z.event_type=event.type;z.dom_element=y.name||y.id;z.category='eventhandler';});}});a.$E=f.$E=q;});
__d("evalGlobal",[],function(a,b,c,d,e,f){function g(h){if(typeof h!='string')throw new TypeError('JS sent to evalGlobal is not a string. Only strings are permitted.');if(!h)return;var i=document.createElement('script');try{i.appendChild(document.createTextNode(h));}catch(j){i.text=h;}var k=document.getElementsByTagName('head')[0]||document.documentElement;k.appendChild(i);k.removeChild(i);}e.exports=g;});
__d("HTML",["function-extensions","Bootloader","UserAgent","copyProperties","createArrayFrom","evalGlobal"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Bootloader'),h=b('UserAgent'),i=b('copyProperties'),j=b('createArrayFrom'),k=b('evalGlobal');function l(m){if(m&&m.__html)m=m.__html;if(!(this instanceof l)){if(m instanceof l)return m;return new l(m);}this._content=m;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._rootNode=null;return this;}l.isHTML=function(m){return m&&(m instanceof l||m.__html!==undefined);};l.replaceJSONWrapper=function(m){return m&&m.__html!==undefined?new l(m.__html):m;};i(l.prototype,{toString:function(){var m=this._content||'';if(this._extra_action)m+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return m;},setAction:function(m){this._extra_action=m;return this;},getAction:function(){this._fillCache();var m=function(){this._inline_js();k(this._extra_action);}.bind(this);if(this.getDeferred()){return m.defer.bind(m);}else return m;},setDeferred:function(m){this._defer=!!m;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){var m=this.getNodes();if(m.length===1){this._rootNode=m[0];}else{var n=document.createDocumentFragment();for(var o=0;o<m.length;o++)n.appendChild(m[o]);this._rootNode=n;}return this._rootNode;},_fillCache:function(){if(null!==this._nodes)return;var m=this._content;if(!m){this._nodes=[];return;}m=m.replace(/(<(\w+)[^>]*?)\/>/g,function(x,y,z){return z.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?x:y+'></'+z+'>';});var n=m.trim().toLowerCase(),o=document.createElement('div'),p=false,q=(!n.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!n.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(n.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!n.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!n.indexOf('<td')||!n.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!n.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===q){o.className='__WRAPPER';if(h.ie()){q=[0,'<span style="display:none">&nbsp;</span>',''];p=true;}else q=[0,'',''];}o.innerHTML=q[1]+m+q[2];while(q[0]--)o=o.lastChild;if(p)o.removeChild(o.firstChild);o.className!='__WRAPPER';if(h.ie()){var r;if(!n.indexOf('<table')&&-1==n.indexOf('<tbody')){r=o.firstChild&&o.firstChild.childNodes;}else if(q[1]=='<table>'&&-1==n.indexOf('<tbody')){r=o.childNodes;}else r=[];for(var s=r.length-1;s>=0;--s)if(r[s].nodeName&&r[s].nodeName.toLowerCase()=='tbody'&&r[s].childNodes.length==0)r[s].parentNode.removeChild(r[s]);}var t=o.getElementsByTagName('script'),u=[];for(var v=0;v<t.length;v++)if(t[v].src){u.push(g.requestResource.bind(g,'js',t[v].src));}else u.push(k.bind(null,t[v].innerHTML));for(var v=t.length-1;v>=0;v--)t[v].parentNode.removeChild(t[v]);var w=function(){for(var x=0;x<u.length;x++)u[x]();};this._nodes=j(o.childNodes);this._inline_js=w;}});e.exports=l;});
__d("isScalar",[],function(a,b,c,d,e,f){function g(h){return (/string|number|boolean/).test(typeof h);}e.exports=g;});
__d("DOM",["event-extensions","DOMQuery","HTML","UserAgent","$","copyProperties","createArrayFrom","isScalar","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOMQuery'),h=b('HTML'),i=b('UserAgent'),j=b('$'),k=b('copyProperties'),l=b('createArrayFrom'),m=b('isScalar'),n=b('tx'),o='js_',p=0,q={};k(q,g);k(q,{create:function(u,v,w){var x=document.createElement(u);if(v)q.setAttributes(x,v);if(w!=null)q.setContent(x,w);return x;},setAttributes:function(u,v){if(v.type)u.type=v.type;for(var w in v){var x=v[w],y=(/^on/i).test(w);if(w=='type'){continue;}else if(w=='style'){if(typeof x=='string'){u.style.cssText=x;}else k(u.style,x);}else if(y){Event.listen(u,w.substr(2),x);}else if(w in u){u[w]=x;}else if(u.setAttribute)u.setAttribute(w,x);}},prependContent:function(u,v){return r(v,u,function(w){u.firstChild?u.insertBefore(w,u.firstChild):u.appendChild(w);});},insertAfter:function(u,v){var w=u.parentNode;return r(v,w,function(x){u.nextSibling?w.insertBefore(x,u.nextSibling):w.appendChild(x);});},insertBefore:function(u,v){var w=u.parentNode;return r(v,w,function(x){w.insertBefore(x,u);});},setContent:function(u,v){q.empty(u);return q.appendContent(u,v);},appendContent:function(u,v){return r(v,u,function(w){u.appendChild(w);});},replace:function(u,v){var w=u.parentNode;return r(v,w,function(x){w.replaceChild(x,u);});},remove:function(u){u=j(u);if(u.parentNode)u.parentNode.removeChild(u);},empty:function(u){u=j(u);while(u.firstChild)q.remove(u.firstChild);},shallowClone:function(u){s(u,false);},deepClone:function(u){s(u,true);},getID:function(u){var v=u.id;if(!v){v=o+p++;u.id=v;}return v;}});function r(u,v,w){u=h.replaceJSONWrapper(u);if(u instanceof h&&''===v.innerHTML&&-1===u.toString().indexOf('<scr'+'ipt')){var x=i.ie();if(!x||(x>7&&!g.isNodeOfType(v,['table','tbody','thead','tfoot','tr','select','fieldset']))){var y=x?'<em style="display:none;">&nbsp;</em>':'';v.innerHTML=y+u;x&&v.removeChild(v.firstChild);return l(v.childNodes);}}else if(g.isTextNode(v)){v.data=u;return [u];}var z=document.createDocumentFragment(),aa,ba=[],ca=[];if(!Array.isArray(u))u=[u];for(var da=0;da<u.length;da++){aa=h.replaceJSONWrapper(u[da]);if(aa instanceof h){ca.push(aa.getAction());var ea=aa.getNodes();for(var fa=0;fa<ea.length;fa++){ba.push(ea[fa]);z.appendChild(ea[fa]);}}else if(m(aa)){var ga=document.createTextNode(aa);ba.push(ga);z.appendChild(ga);}else if(g.isNode(aa)){ba.push(aa);z.appendChild(aa);}}w(z);ca.forEach(function(ha){ha();});return ba;}function s(u,v){var w=u.cloneNode(v);delete w.__FB_TOKEN;return w;}function t(u){function v(w){return q.create('div',{},w).innerHTML;}return function(w,x){var y={};if(x)for(var z in x)y[z]=v(x[z]);return h(u(w,y));};}q.tx=t(n);q.tx._=q._tx=t(n._);e.exports=q;});
__d("legacy:dom",["DOM"],function(a,b,c,d){a.DOM=b('DOM');},3);
__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;});
__d("AsyncResponse",["Bootloader","Env","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Env'),i=b('copyProperties'),j=b('tx');function k(l,m){i(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:m||null,request:l||null,silentError:false,is_last:true});return this;}i(k,{defaultErrorHandler:function(l){try{if(!l.silentError){k.verboseErrorHandler(l);}else l.logErrorByGroup('silent',10);}catch(m){alert(l);}},verboseErrorHandler:function(l){try{var n=l.getErrorSummary(),o=l.getErrorDescription();l.logErrorByGroup('popup',10);if(l.silentError&&o=='')o="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";g.loadModules(['Dialog'],function(p){new p().setTitle(n).setBody(o).setButtons([p.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(m){alert(l);}}});i(k.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(l){l=(l===undefined?null:l);this.errorSummary=l;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(l,m){if(window.send_error_signal){var n={err_code:this.error,vip:(h.vip||'-')};if(m){n.duration=m.duration;n.xfb_ip=m.xfb_ip;}var o=this.request.getURI();n.path=o||'-';n.aid=this.request.userActionID;if(o&&o.indexOf('scribe_endpoint.php')!=-1)l='async_error_double';send_error_signal(l,JSON.stringify(n));}},logErrorByGroup:function(l,m){if(Math.floor(Math.random()*m)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+l);}else this.logError('async_error_logic_'+l);}});e.exports=k;});
__d("HTTPErrors",[],function(a,b,c,d,e,f){var g={get:bagofholding,getAll:bagofholding};e.exports=g;});
__d("bind",[],function(a,b,c,d,e,f){function g(h,i){var j=Array.prototype.slice.call(arguments,2);if(typeof i!='string')return Function.prototype.bind.apply(i,[h].concat(j));function k(){var l=j.concat(Array.prototype.slice.call(arguments));if(h[i])return h[i].apply(h,l);}k.toString=function(){return 'bound lazily: '+h[i];};return k;}e.exports=g;});
__d("AsyncRequest",["event-extensions","Arbiter","AsyncDOM","AsyncResponse","Bootloader","CSS","Env","HTTPErrors","JSCC","Parent","Run","ServerJS","URI","UserAgent","XHR","bind","copyProperties","evalGlobal","ge","goURI","isEmpty","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncDOM'),i=b('AsyncResponse'),j=b('Bootloader'),k=b('CSS'),l=b('Env'),m=b('HTTPErrors'),n=b('JSCC'),o=b('Parent'),p=b('Run'),q=b('ServerJS'),r=b('URI'),s=b('UserAgent'),t=b('XHR'),u=b('bind'),v=b('copyProperties'),w=b('evalGlobal'),x=b('ge'),y=b('goURI'),z=b('isEmpty'),aa=b('tx');function ba(){try{return !window.loaded;}catch(ka){return true;}}function ca(ka){return ('upload' in ka)&&('onprogress' in ka.upload);}function da(ka){return 'withCredentials' in ka;}function ea(ka){return ka.status in {0:1,12029:1,12030:1,12031:1,12152:1};}function fa(ka){var la=!ka||typeof(ka)==='function';return la;}var ga=2,ha=ga;g.subscribe('page_transition',function(ka,la){ha=la.id;});function ia(ka){v(this,{transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,uploadProgressHandler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,interceptHandler:bagofholding,finallyHandler:bagofholding,abortHandler:bagofholding,serverDialogCancelHandler:null,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:[],remainingRetries:0,userActionID:'-'});this.option={asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,handleErrorAfterUnload:false};this.errorHandler=i.defaultErrorHandler;this.transportErrorHandler=u(this,'errorHandler');if(ka!==undefined)this.setURI(ka);}v(ia,{bootstrap:function(ka,la,ma){var na='GET',oa=true,pa={};if(ma||la&&(la.rel=='async-post'||la.getAttribute&&la.getAttribute('forcemethod')=='post')){na='POST';oa=false;if(ka){ka=r(ka);pa=ka.getQueryData();ka.setQueryData({});}}var qa=o.byClass(la,'stat_elem')||la;if(qa&&k.hasClass(qa,'async_saving'))return false;var ra=new ia(ka).setReadOnly(oa).setMethod(na).setData(pa).setNectarModuleDataSafe(la).setRelativeTo(la);if(la){ra.setHandler(function(ta){Event.fire(la,'success',{response:ta});});ra.setErrorHandler(function(ta){if(Event.fire(la,'error',{response:ta})!==false)i.defaultErrorHandler(ta);});}if(qa){ra.setStatusElement(qa);var sa=qa.getAttribute('data-status-class');sa&&ra.setStatusClass(sa);}if(la)Event.fire(la,'AsyncRequest/send',{request:ra});ra.send();return false;},post:function(ka,la){new ia(ka).setReadOnly(false).setMethod('POST').setData(la).send();return false;},getLastID:function(){return ga;},suppressOnloadToken:{},_inflight:[],_inflightCount:0,_inflightAdd:bagofholding,_inflightPurge:bagofholding,getInflightCount:function(){return this._inflightCount;},_inflightEnable:function(){if(s.ie()){v(ia,{_inflightAdd:function(ka){this._inflight.push(ka);},_inflightPurge:function(){ia._inflight=ia._inflight.filter(function(ka){return ka.transport&&ka.transport.readyState<4;});}});p.onUnload(function(){ia._inflight.forEach(function(ka){if(ka.transport&&ka.transport.readyState<4){ka.transport.abort();delete ka.transport;}});});}}});v(ia.prototype,{_dispatchResponse:function(ka){try{this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}if(this.initialHandler(ka)===false)return;clearTimeout(this.timer);if(ka.jscc_map){var ma=(eval)(ka.jscc_map);n.init(ma);}var na;if(this.handler)try{na=this._shouldSuppressJS(this.handler(ka));}catch(oa){ka.is_last&&this.finallyHandler(ka);throw oa;}if(!na)this._handleJSResponse(ka);ka.is_last&&this.finallyHandler(ka);}catch(la){}},_shouldSuppressJS:function(ka){return ka===ia.suppressOnloadToken;},_handleJSResponse:function(ka){var la=this.getRelativeTo(),ma=ka.domops,na=ka.jsmods,oa=new q().setRelativeTo(la);if(na&&(na.define||na.instances||na.markup)){oa.handle({define:na.define,instances:na.instances,markup:na.markup});delete na.define;delete na.instances;delete na.markup;}if(ma)h.invoke(ma,la);if(na)oa.handle(na);this._handleJSRegisters(ka,'onload');if(this.lid)g.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},g.BEHAVIOR_EVENT);this._handleJSRegisters(ka,'onafterload');},_handleJSRegisters:function(ka,la){var ma=ka[la];if(!ma)return;for(var na=0;na<ma.length;na++)try{(new Function(ma[na])).apply(this);}catch(oa){}},invokeResponseHandler:function(ka){if(typeof(ka.redirect)!=='undefined'){(function(){this.setURI(ka.redirect).send();}).bind(this).defer();return;}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler)return;if(typeof(ka.asyncResponse)!=='undefined'){if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}var la=ka.asyncResponse;if(la.inlinejs)w(la.inlinejs);if(la.lid){this._responseTime=Date.now();if(a.CavalryLogger)this.cavalry=a.CavalryLogger.getInstance(la.lid);this.lid=la.lid;}j.setResourceMap(la.resource_map);if(la.bootloadable)j.enableBootload(la.bootloadable);var ma;if(la.getError()&&!la.getErrorIsWarning()){var na=this.errorHandler.bind(this);ma=this._dispatchErrorResponse.bind(this,la,na);}else ma=this._dispatchResponse.bind(this,la);ma=ma.defer.bind(ma);var oa=false;if(this.preBootloadHandler)oa=this.preBootloadHandler(la);la.css=la.css||[];la.js=la.js||[];j.loadResources(la.css.concat(la.js),ma,oa,this.getURI());}else if(typeof(ka.transportError)!=='undefined'){if(this._xFbServer){this._invokeErrorHandler(1008);}else this._invokeErrorHandler(1012);}else this._invokeErrorHandler(1007);},_invokeErrorHandler:function(ka){if(ba()&&!this.getOption('handleErrorAfterUnload'))return;var la;if(this.responseText===''){la=1002;}else if(this._requestAborted){la=1011;}else{try{la=ka||this.transport.status||1004;}catch(ma){la=1005;}if(false===navigator.onLine)la=1006;}if(!this.transportErrorHandler)return;var na=this.transportErrorHandler.bind(this),oa,pa,qa=true;if(la===1006){pa="No Network Connection";oa="Your browser appears to be offline. Please check your internet connection and try again.";}else if(la>=300&&la<=399){pa="Redirection";oa="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";var ra=this.transport.getResponseHeader("Location");if(ra)y(ra,true);qa=true;}else{pa="Oops";oa="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');var sa=new i(this);v(sa,{error:la,errorSummary:pa,errorDescription:oa,silentError:qa});this._dispatchErrorResponse(sa,na);},_dispatchErrorResponse:function(ka,la){var ma=ka.getError();try{this.clearStatusIndicator();var oa=this._sendTimeStamp&&{duration:Date.now()-this._sendTimeStamp,xfb_ip:this._xFbServer||'-'};ka.logError('async_error',oa);if(!this._isRelevant()||ma===1010){this.abort();return;}if(ma==1357008||ma==1357007||ma==1442002||ma==1357001){var pa=ma==1357008||ma==1357007;this.interceptHandler(ka);this._displayServerDialog(ka,pa);}else if(this.initialHandler(ka)!==false){clearTimeout(this.timer);try{la(ka);}catch(qa){this.finallyHandler(ka);throw qa;}this.finallyHandler(ka);}}catch(na){}},_displayServerDialog:function(ka,la){var ma=ka.getPayload();if(ma.__dialog!==undefined){this._displayServerLegacyDialog(ka,la);return;}var na=ma.__dialogx;new q().handle(na);j.loadModules(['ConfirmationDialog'],function(oa){oa.setupConfirmation(ka,this);}.bind(this));},_displayServerLegacyDialog:function(ka,la){var ma=ka.getPayload().__dialog;j.loadModules(['Dialog'],function(na){var oa=new na(ma);if(la)oa.setHandler(this._displayConfirmationHandler.bind(this,oa));oa.setCancelHandler(function(){var pa=this.getServerDialogCancelHandler();try{pa&&pa(ka);}catch(qa){throw qa;}finally{this.finallyHandler(ka);}}.bind(this)).setCausalElement(this.relativeTo).show();}.bind(this));},_displayConfirmationHandler:function(ka){this.data.confirmed=1;v(this.data,ka.getFormData());this.send();},_handleJSONPResponse:function(ka){this.is_first=(this.is_first===undefined);var la=this._interpretResponse(ka);la.asyncResponse.is_first=this.is_first;la.asyncResponse.is_last=this.transport.hasFinished();this.invokeResponseHandler(la);if(this.transport.hasFinished())delete this.transport;},_handleXHRResponse:function(ka){var la;if(this.getOption('suppressEvaluation')){la={asyncResponse:new i(this,ka)};}else{var ma=ka.responseText,na=null;try{var pa=this._unshieldResponseText(ma);try{var qa=(eval)('('+pa+')');la=this._interpretResponse(qa);}catch(oa){na='excep';la={transportError:'eval() failed on async to '+this.getURI()};}}catch(oa){na='empty';la={transportError:oa.message};}if(na)a.send_error_signal&&a.send_error_signal('async_xport_resp',[(this._xFbServer?'1008_':'1012_')+na,this._xFbServer||'-',this.getURI(),ma.length,ma.substr(0,1600)].join(':'));}this.invokeResponseHandler(la);},_unshieldResponseText:function(ka){var la="for (;;);",ma=la.length;if(ka.length<=ma)throw new Error('Response too short on async to '+this.getURI());var na=0;while(ka.charAt(na)==" "||ka.charAt(na)=="\n")na++;na&&ka.substring(na,na+ma)==la;return ka.substring(na+ma);},_interpretResponse:function(ka){if(ka.redirect)return {redirect:ka.redirect};var la=new i(this);if(ka.__ar!=1){la.payload=ka;}else v(la,ka);return {asyncResponse:la};},_onStateChange:function(){try{if(this.transport.readyState==4){ia._inflightCount--;ia._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!=='undefined'&&this.transport.getResponseHeader('X-FB-Debug'))this._xFbServer=this.transport.getResponseHeader('X-FB-Debug');}catch(la){}if(this.transport.status>=200&&this.transport.status<300){ia.lastSuccessTime=Date.now();this._handleXHRResponse(this.transport);}else if(s.safari()&&(typeof(this.transport.status)=='undefined')){this._invokeErrorHandler(1002);}else if(l.retry_ajax_on_network_error&&ea(this.transport)&&this.remainingRetries>0){this.remainingRetries--;delete this.transport;this.send(true);return;}else this._invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(ka){if(ba())return;delete this.transport;if(this.remainingRetries>0){this.remainingRetries--;this.send(true);}else{!this.getOption('suppressErrorAlerts');a.send_error_signal&&a.send_error_signal('async_xport_resp',[1007,this._xFbServer||'-',this.getURI(),ka.message].join(':'));this._invokeErrorHandler(1007);}}},_isMultiplexable:function(){if(this.getOption('jsonp')||this.getOption('useIframeTransport'))return false;if(!this.uri.isFacebookURI())return false;if(!this.getOption('asynchronous'))return false;return true;},handleResponse:function(ka){var la=this._interpretResponse(ka);this.invokeResponseHandler(la);},setMethod:function(ka){this.method=ka.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(ka){this.data=ka;return this;},_setDataHash:function(){if(this.method!='POST'||this.data.phstamp)return;var ka=r.implodeQuery(this.data).length,la='';for(var ma=0;ma<this.data.fb_dtsg.length;ma++)la+=this.data.fb_dtsg.charCodeAt(ma);this.data.phstamp='1'+la+ka;},setRawData:function(ka){this.rawData=ka;return this;},getData:function(){return this.data;},setContextData:function(ka,la,ma){ma=ma===undefined?true:ma;if(ma)this.context['_log_'+ka]=la;return this;},_setUserActionID:function(){var ka=a.ArbiterMonitor&&a.ArbiterMonitor.getUE()||'-';this.userActionID=(a.EagleEye&&a.EagleEye.getSessionID()||'-')+'/'+ka;},setURI:function(ka){var la=r(ka);if(this.getOption('useIframeTransport')&&!la.isFacebookURI())return this;if(!this._allowCrossOrigin&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!la.isSameOrigin())return this;this._setUserActionID();if(!ka||la.isEmpty()){if(a.send_error_signal&&a.get_error_stack){var ma={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};a.send_error_signal('async_error',JSON.stringify(ma));a.send_error_signal('async_xport_stack',[1013,window.location.href,null,a.get_error_stack()].join(':'));}return this;}this.uri=la;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(ka){this.initialHandler=ka;return this;},setHandler:function(ka){if(fa(ka))this.handler=ka;return this;},getHandler:function(){return this.handler;},setUploadProgressHandler:function(ka){if(fa(ka))this.uploadProgressHandler=ka;return this;},setErrorHandler:function(ka){if(fa(ka))this.errorHandler=ka;return this;},setTransportErrorHandler:function(ka){this.transportErrorHandler=ka;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(ka,la){if(fa(la)){this.timeout=ka;this.timeoutHandler=la;}return this;},resetTimeout:function(ka){if(!(this.timeoutHandler===null))if(ka===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var la=!this._allowCrossPageTransition;this.timeout=ka;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,la);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++ga;return this;},setInterceptHandler:function(ka){this.interceptHandler=ka;return this;},setFinallyHandler:function(ka){this.finallyHandler=ka;return this;},setAbortHandler:function(ka){this.abortHandler=ka;return this;},getServerDialogCancelHandler:function(){return this.serverDialogCancelHandler;},setServerDialogCancelHandler:function(ka){this.serverDialogCancelHandler=ka;return this;},setPreBootloadHandler:function(ka){this.preBootloadHandler=ka;return this;},setReadOnly:function(ka){if(!(typeof(ka)!='boolean'))this.readOnly=ka;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(ka){this.relativeTo=ka;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(ka){this.statusClass=ka;return this;},setStatusElement:function(ka){this.statusElement=ka;return this;},getStatusElement:function(){return x(this.statusElement);},_isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>ha;},clearStatusIndicator:function(){var ka=this.getStatusElement();if(ka){k.removeClass(ka,'async_saving');k.removeClass(ka,this.statusClass);}},addStatusIndicator:function(){var ka=this.getStatusElement();if(ka){k.addClass(ka,'async_saving');k.addClass(ka,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(ka){this.data[ka]=this.data[ka]||l[ka]||(x(ka)||{}).value;if(this.data[ka]!==undefined)return true;return false;},this);},setOption:function(ka,la){if(typeof(this.option[ka])!='undefined')this.option[ka]=la;return this;},getOption:function(ka){typeof(this.option[ka])=='undefined';return this.option[ka];},abort:function(){if(this.transport){var ka=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=true;this.transport.abort();this.setTransportErrorHandler(ka);}this.abortHandler();},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=true;this.transport.abort();}},setNectarData:function(ka){if(ka){if(this.data.nctr===undefined)this.data.nctr={};v(this.data.nctr,ka);}return this;},setNectarModuleDataSafe:function(ka){if(this.setNectarModuleData)this.setNectarModuleData(ka);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(ka){this._allowCrossPageTransition=!!ka;if(this.timer)this.resetTimeout(this.timeout);return this;},setAllowCrossOrigin:function(ka){this._allowCrossOrigin=!!ka;return this;},send:function(ka){ka=ka||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}v(this.data,t.getAsyncParams(this.method));if(!z(this.context)){v(this.data,this.context);this.data.ajax_log=1;}if(l.force_param)v(this.data,l.force_param);this._setUserActionID();if(this.getOption('bundle')&&this._isMultiplexable()){ja.schedule(this);return true;}this.setNewSerial();if(!this.getOption('asynchronous'))this.uri.addQueryData({__s:1});this.finallyHandler=a.async_callback(this.finallyHandler,'final');var la,ma;if(this.method=='GET'||this.rawData){la=this.uri.addQueryData(this.data).toString();ma=this.rawData||'';}else{la=this.uri.toString();this._setDataHash();ma=r.implodeQuery(this.data);}if(this.transport)return false;if(this.getOption('jsonp')||this.getOption('useIframeTransport')){d(['JSONPTransport'],function(qa){this.transport=new qa(this.getOption('jsonp')?'jsonp':'iframe',this.uri,this._handleJSONPResponse.bind(this));this.transport.send();}.bind(this));return true;}var na=t.create();if(!na)return false;na.onreadystatechange=a.async_callback(this._onStateChange.bind(this),'xhr');if(this.uploadProgressHandler&&ca(na))na.upload.onprogress=this.uploadProgressHandler.bind(this);if(!ka)this.remainingRetries=this.getOption('retries');if(a.send_error_signal||a.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=na;try{this.transport.open(this.method,la,this.getOption('asynchronous'));}catch(oa){return false;}var pa=l.svn_rev;if(pa)this.transport.setRequestHeader('X-SVN-Rev',String(pa));if(!this.uri.isSameOrigin()&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')){if(!da(this.transport))return false;if(this.uri.isFacebookURI())this.transport.withCredentials=true;}if(this.method=='POST'&&!this.rawData)this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();this.transport.send(ma);if(this.timeout!==null)this.resetTimeout(this.timeout);ia._inflightCount++;ia._inflightAdd(this);return true;}});function ja(){this._requests=[];}v(ja,{multiplex:null,schedule:function(ka){if(!ja.multiplex){ja.multiplex=new ja();(function(){ja.multiplex.send();ja.multiplex=null;}).defer();}ja.multiplex.add(ka);}});v(ja.prototype,{add:function(ka){this._requests.push(ka);},send:function(){var ka=this._requests;if(!ka.length)return;var la;if(ka.length===1){la=ka[0];}else{var ma=ka.map(function(na){return [na.uri.getPath(),r.implodeQuery(na.data)];});la=new ia('/ajax/proxy.php').setAllowCrossPageTransition(true).setData({data:ma}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this));}la.setOption('bundle',false).send();},_handler:function(ka){var la=ka.getPayload().responses;if(la.length!==this._requests.length)return;for(var ma=0;ma<this._requests.length;ma++){var na=this._requests[ma],oa=na.uri.getPath();na.id=this.id;if(la[ma][0]!==oa){na.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+oa});continue;}na.handleResponse(la[ma][1]);}},_transportErrorHandler:function(ka){var la={transportError:ka.errorDescription},ma=this._requests.map(function(na){na.id=this.id;na.invokeResponseHandler(la);return na.uri.getPath();});}});e.exports=ia;});
__d("DOMPosition",["DOMQuery"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h={getScrollPosition:function(){var i=g.getDocumentScrollElement();return {x:i.scrollLeft,y:i.scrollTop};},getElementPosition:function(i){if(!i)return;if(!('getBoundingClientRect' in i))return {x:0,y:0};var j=i.getBoundingClientRect(),k=document.documentElement,l=Math.round(j.left)-k.clientLeft,m=Math.round(j.top)-k.clientTop;return {x:l,y:m};}};e.exports=h;});
__d("DOMControl",["DataStore","$","copyProperties"],function(a,b,c,d,e,f){var g=b('DataStore'),h=b('$'),i=b('copyProperties');function j(k){this.root=h(k);this.updating=false;g.set(k,'DOMControl',this);}i(j.prototype,{getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(k){if(!this.beginUpdate())return this;this.onupdate(k);this.endUpdate();},onupdate:function(k){}});j.getInstance=function(k){return g.get(k,'DOMControl');};e.exports=j;});
__d("Input",["CSS","DOMQuery","DOMControl"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOMQuery'),i=b('DOMControl'),j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(['enforceMaxLength'],function(n){n(l,m);});},k={focus:function(l){try{l.focus();}catch(m){}},isEmpty:function(l){return !(/\S/).test(l.value||'')||g.hasClass(l,'DOMControl_placeholder');},getValue:function(l){return k.isEmpty(l)?'':l.value;},setValue:function(l,m){g.removeClass(l,'DOMControl_placeholder');l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('aria-label',m);l.setAttribute('placeholder',m);if(l==document.activeElement)return;if(k.isEmpty(l)){g.conditionClass(l,'DOMControl_placeholder',m);l.value=m||'';}},reset:function(l){var m=l!==document.activeElement?(l.getAttribute('placeholder')||''):'';l.value=m;g.conditionClass(l,'DOMControl_placeholder',m);l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;});
__d("Form",["event-extensions","AsyncRequest","AsyncResponse","CSS","DOM","DOMPosition","DOMQuery","DataStore","Env","Input","Parent","URI","createArrayFrom","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('AsyncResponse'),i=b('CSS'),j=b('DOM'),k=b('DOMPosition'),l=b('DOMQuery'),m=b('DataStore'),n=b('Env'),o=b('Input'),p=b('Parent'),q=b('URI'),r=b('createArrayFrom'),s=b('trackReferrer'),t='FileList' in window,u='FormData' in window;function v(x){var y={};q.implodeQuery(x).split('&').forEach(function(z){if(z){var aa=/^([^=]*)(?:=(.*))?$/.exec(z),ba=q.decodeComponent(aa[1]),ca=aa[2]?q.decodeComponent(aa[2]):null;y[ba]=ca;}});return y;}var w={getInputs:function(x){x=x||document;return [].concat(r(l.scry(x,'input')),r(l.scry(x,'select')),r(l.scry(x,'textarea')),r(l.scry(x,'button')));},getSelectValue:function(x){return x.options[x.selectedIndex].value;},setSelectValue:function(x,y){for(var z=0;z<x.options.length;++z)if(x.options[z].value==y){x.selectedIndex=z;break;}},getRadioValue:function(x){for(var y=0;y<x.length;y++)if(x[y].checked)return x[y].value;return null;},getElements:function(x){return r(x.tagName=='FORM'?x.elements:w.getInputs(x));},getAttribute:function(x,y){return (x.getAttributeNode(y)||{}).value||null;},setDisabled:function(x,y){w.getElements(x).forEach(function(z){if(z.disabled!==undefined){var aa=m.get(z,'origDisabledState');if(y){if(aa===undefined)m.set(z,'origDisabledState',z.disabled);z.disabled=y;}else if(aa!==true)z.disabled=false;}});},bootstrap:function(x,y){var z=(w.getAttribute(x,'method')||'GET').toUpperCase();y=p.byTag(y,'button')||y;var aa=p.byClass(y,'stat_elem')||x;if(i.hasClass(aa,'async_saving'))return;if(y&&(y.form!==x||(y.nodeName!='INPUT'&&y.nodeName!='BUTTON')||y.type!='submit')){var ba=l.scry(x,'.enter_submit_target')[0];ba&&(y=ba);}var ca=w.serialize(x,y);w.setDisabled(x,true);var da=w.getAttribute(x,'ajaxify')||w.getAttribute(x,'action');s(x,da);var ea=new g(da);ea.setData(ca).setNectarModuleDataSafe(x).setReadOnly(z=='GET').setMethod(z).setRelativeTo(x).setStatusElement(aa).setInitialHandler(w.setDisabled.curry(x,false)).setHandler(function(fa){Event.fire(x,'success',{response:fa});}).setErrorHandler(function(fa){if(Event.fire(x,'error',{response:fa})!==false)h.defaultErrorHandler(fa);}).setFinallyHandler(w.setDisabled.curry(x,false)).send();},forEachValue:function(x,y,z){w.getElements(x).forEach(function(aa){if(aa.name&&!aa.disabled&&aa.type!=='submit')if(!aa.type||((aa.type==='radio'||aa.type==='checkbox')&&aa.checked)||aa.type==='text'||aa.type==='password'||aa.type==='hidden'||aa.nodeName==='TEXTAREA'){z(aa.type,aa.name,o.getValue(aa));}else if(aa.nodeName==='SELECT'){for(var ba=0,ca=aa.options.length;ba<ca;ba++){var da=aa.options[ba];if(da.selected)z('select',aa.name,da.value);}}else if(t&&aa.type==='file'){var ea=aa.files;for(var fa=0;fa<ea.length;fa++)z('file',aa.name,ea.item(fa));}});if(y&&y.name&&y.type==='submit'&&l.contains(x,y)&&l.isNodeOfType(y,['input','button']))z('submit',y.name,y.value);},createFormData:function(x,y){if(!u)return null;var z=new FormData();if(x)if(l.isNode(x)){w.forEachValue(x,y,function(ca,da,ea){z.append(da,ea);});}else{var aa=v(x);for(var ba in aa)z.append(ba,aa[ba]);}return z;},serialize:function(x,y){var z={};w.forEachValue(x,y,function(aa,ba,ca){if(aa==='file')return;w._serializeHelper(z,ba,ca);});return w._serializeFix(z);},_serializeHelper:function(x,y,z){var aa=Object.prototype.hasOwnProperty,ba=/([^\]]+)\[([^\]]*)\](.*)/.exec(y);if(ba){if(!x[ba[1]]||!aa.call(x,ba[1])){var ca;x[ba[1]]=ca={};if(x[ba[1]]!==ca)return;}var da=0;if(ba[2]===''){while(x[ba[1]][da]!==undefined)da++;}else da=ba[2];if(ba[3]===''){x[ba[1]][da]=z;}else w._serializeHelper(x[ba[1]],da.concat(ba[3]),z);}else x[y]=z;},_serializeFix:function(x){var y=[];for(var z in x){if(x[z] instanceof Object)x[z]=w._serializeFix(x[z]);y.push(z);}if(y.length>0){var aa=0,ba=true;y.sort().forEach(function(da){if(da!=aa++)ba=false;});if(ba){var ca=[];y.forEach(function(da){ca[da]=x[da];});return ca;}}return x;},post:function(x,y,z){var aa=document.createElement('form');aa.action=x.toString();aa.method='POST';aa.style.display='none';if(z)aa.target=z;y.fb_dtsg=n.fb_dtsg;w.createHiddenInputs(y,aa);l.getRootElement().appendChild(aa);aa.submit();return false;},createHiddenInputs:function(x,y,z,aa){z=z||{};var ba=v(x);for(var ca in ba){if(ba[ca]===null)continue;if(z[ca]&&aa){z[ca].value=ba[ca];}else{var da=j.create('input',{type:'hidden',name:ca,value:ba[ca]});z[ca]=da;y.appendChild(da);}}return z;},getFirstElement:function(x,y){y=y||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var z=[];for(var aa=0;aa<y.length;aa++){z=l.scry(x,y[aa]);for(var ba=0;ba<z.length;ba++){var ca=z[ba];try{var ea=k.getElementPosition(ca);if(ea.y>0&&ea.x>0)return ca;}catch(da){}}}return null;},focusFirst:function(x){var y=w.getFirstElement(x);if(y){y.focus();return true;}return false;}};e.exports=w;});
__d("legacy:dom-form",["Form"],function(a,b,c,d){a.Form=b('Form');},3);
__d("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
function show(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='';}return false;}function hide(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);b.style.display=Style.get(b,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);if(shown(b)){hide(b);}else show(b);}return false;}
__d("legacy:event-extensions",["event-extensions"],function(a,b,c,d){b('event-extensions');},3);
__d("OnloadHooks",["Arbiter","ErrorUtils","InitialJSLoader","OnloadEvent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ErrorUtils'),i=b('InitialJSLoader'),j=b('OnloadEvent');function k(){var r=a.CavalryLogger;if(!window.loaded&&r)r.getInstance().setTimeStamp('t_prehooks');n('onloadhooks');if(!window.loaded&&r)r.getInstance().setTimeStamp('t_hooks');window.loaded=true;g.inform('uipage_onload',true,g.BEHAVIOR_STATE);}function l(){n('onafterloadhooks');window.afterloaded=true;}function m(r,s){return h.applyWithGuard(r,null,null,function(t){t.event_type=s;t.category='runhook';});}function n(r){var s=(r=='onbeforeleavehooks')||(r=='onbeforeunloadhooks');do{var t=window[r];if(!t)break;if(!s)window[r]=null;for(var u=0;u<t.length;u++){var v=m(t[u],r);if(s&&v)return v;}}while(!s&&window[r]);}function o(){if(!window.loaded){window.loaded=true;n('onloadhooks');}if(!window.afterloaded){window.afterloaded=true;n('onafterloadhooks');}}function p(){g.registerCallback(k,[j.ONLOAD_DOMCONTENT_CALLBACK,i.INITIAL_JS_READY]);g.registerCallback(l,[j.ONLOAD_DOMCONTENT_CALLBACK,j.ONLOAD_CALLBACK,i.INITIAL_JS_READY]);g.subscribe(j.ONBEFOREUNLOAD,function(r,s){s.warn=n('onbeforeleavehooks')||n('onbeforeunloadhooks');if(!s.warn){window.loaded=false;window.afterloaded=false;}},g.SUBSCRIBE_NEW);g.subscribe(j.ONUNLOAD,function(r,s){n('onunloadhooks');},g.SUBSCRIBE_NEW);}var q={_onloadHook:k,_onafterloadHook:l,runHook:m,runHooks:n,keepWindowSetAsLoaded:o};p();a.OnloadHooks=e.exports=q;});
__d("legacy:onload-action",["OnloadHooks"],function(a,b,c,d){var e=b('OnloadHooks');a._onloadHook=e._onloadHook;a._onafterloadHook=e._onafterloadHook;a.runHook=e.runHook;a.runHooks=e.runHooks;a.keep_window_set_as_loaded=e.keepWindowSetAsLoaded;},3);
__d("legacy:input-methods",["Input","copyProperties"],function(a,b,c,d){var e=b('Input'),f=b('copyProperties');f(a.Input||(a.Input={}),e);},3);
function link_rel_preload(){var a=/async(?:-post)?|dialog(?:-pipe|-post)?|theater|toggle/;document.documentElement.onmousedown=function(b){b=b||window.event;var c=b.target||b.srcElement,d=Parent.byTag(c,'A');if(!d)return;var e=d.getAttribute('ajaxify'),f=d.href,g=e||f;if(e&&f&&!(/#$/).test(f)){var h=b.which&&b.which!=1,i=b.altKey||b.ctrlKey||b.metaKey||b.shiftKey;if(h||i)return;}var j=d.rel&&d.rel.match(a);j=j&&j[0];switch(j){case 'dialog':case 'dialog-post':Bootloader.loadComponents('dialog');break;case 'dialog-pipe':Bootloader.loadComponents(['ajaxpipe','dialog']);break;case 'async':case 'async-post':Bootloader.loadComponents('async');break;case 'theater':Bootloader.loadComponents('PhotoSnowlift',function(){PhotoSnowlift.preload(g,d);});break;case 'toggle':Bootloader.loadComponents('Toggler');break;}return;};}
__d("DOMDimensions",["DOMQuery","Style"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('Style'),i={getElementDimensions:function(j){return {width:j.offsetWidth||0,height:j.offsetHeight||0};},getViewportDimensions:function(){var j=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0,k=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return {width:j,height:k};},getViewportWithoutScrollbarDimensions:function(){var j=(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0,k=(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return {width:j,height:k};},getDocumentDimensions:function(j){j=j||document;var k=g.getDocumentScrollElement(j),l=k.scrollWidth||0,m=k.scrollHeight||0;return {width:l,height:m};},measureElementBox:function(j,k,l,m,n){var o;switch(k){case 'left':case 'right':case 'top':case 'bottom':o=[k];break;case 'width':o=['left','right'];break;case 'height':o=['top','bottom'];break;default:throw Error('Invalid plane: '+k);}var p=function(q,r){var s=0;for(var t=0;t<o.length;t++)s+=parseInt(h.get(j,q+'-'+o[t]+r),10)||0;return s;};return (l?p('padding',''):0)+(m?p('border','-width'):0)+(n?p('margin',''):0);}};e.exports=i;});
__d("Vector",["event-extensions","DOMDimensions","DOMPosition","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOMDimensions'),h=b('DOMPosition'),i=b('copyProperties');function j(k,l,m){i(this,{x:parseFloat(k),y:parseFloat(l),domain:m||'pure'});}i(j.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(k,l){if(arguments.length==1){if(k.domain!='pure')k=k.convertTo(this.domain);return this.add(k.x,k.y);}var m=parseFloat(k),n=parseFloat(l);return new j(this.x+m,this.y+n,this.domain);},mul:function(k,l){if(typeof l=="undefined")l=k;return new j(this.x*k,this.y*l,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},distanceTo:function(k){return this.sub(k).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(k){if(k!='pure'&&k!='viewport'&&k!='document')return new j(0,0);if(k==this.domain)return new j(this.x,this.y,this.domain);if(k=='pure')return new j(this.x,this.y);if(this.domain=='pure')return new j(0,0);var l=j.getScrollPosition('document'),m=this.x,n=this.y;if(this.domain=='document'){m-=l.x;n-=l.y;}else{m+=l.x;n+=l.y;}return new j(m,n,k);},setElementPosition:function(k){var l=this.convertTo('document');k.style.left=parseInt(l.x)+'px';k.style.top=parseInt(l.y)+'px';return this;},setElementDimensions:function(k){return this.setElementWidth(k).setElementHeight(k);},setElementWidth:function(k){k.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(k){k.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(k){if(k==document.body){window.scrollBy(this.x,this.y);}else{k.scrollLeft+=this.x;k.scrollTop+=this.y;}return this;}});i(j,{getEventPosition:function(k,l){l=l||'document';var m=Event.getPosition(k),n=new j(m.x,m.y,'document');return n.convertTo(l);},getScrollPosition:function(k){k=k||'document';var l=h.getScrollPosition();return new j(l.x,l.y,'document').convertTo(k);},getElementPosition:function(k,l){l=l||'document';var m=h.getElementPosition(k);return new j(m.x,m.y,'viewport').convertTo(l);},getElementDimensions:function(k){var l=g.getElementDimensions(k);return new j(l.width,l.height);},getViewportDimensions:function(){var k=g.getViewportDimensions();return new j(k.width,k.height,'viewport');},getDocumentDimensions:function(k){var l=g.getDocumentDimensions(k);return new j(l.width,l.height,'document');},deserialize:function(k){var l=k.split(',');return new j(l[0],l[1]);}});e.exports=j;});
__d("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__d("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__d("startsWith",[],function(a,b,c,d,e,f){function g(h,i,j){var k=String(h);j=Math.min(Math.max(j||0,0),k.length);return k.lastIndexOf(String(i),j)===j;}e.exports=g;});
__d("AsyncRequestNectarLogging",["AsyncRequest","Env","copyProperties","startsWith"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Env'),i=b('copyProperties'),j=b('startsWith');i(g.prototype,{setNectarModuleData:function(k){if(this.method=='POST'){var l=h.module;if(k&&l===undefined){var m={fbpage_fan_confirm:1},n=null;for(var o=k;o&&o!=document.body;o=o.parentNode){if(!o.id||typeof o.id!=='string')continue;if(j(o.id,'pagelet_')){l=o.id;break;}if(!n&&m[o.id])n=o.id;}if(l===undefined&&n)l=n;}if(l!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=l;}}},setNectarImpressionId:function(){if(this.method=='POST'){var k=h.impid;if(k!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=k;}}}});});
__d("legacy:async-postlude",["AsyncRequestNectarLogging"],function(a,b,c,d){b('AsyncRequestNectarLogging');},3);
__d("legacy:ua",["UserAgent"],function(a,b,c,d){a.ua=b('UserAgent');},3);
__d("Animation",["CSS","DOM","Style","UserAgent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('UserAgent');function k(l){if(a==this){return new k(l);}else{this.obj=l;this._reset_state();this.queue=[];this.last_attr=null;}}k.resolution=20;k.offset=0;k.prototype._reset_state=function(){this.state={attrs:{},duration:500};};k.prototype.stop=function(){this._reset_state();this.queue=[];return this;};k.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var l=document.createElement('div');l.style.padding='0px';l.style.margin='0px';l.style.border='0px';l.__animation_refs=1;var m=this.obj.childNodes;while(m.length)l.appendChild(m[0]);this.obj.appendChild(l);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=l;this._refresh_container();};k.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};k.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var l=this.container_div.childNodes;while(l.length)this.obj.appendChild(l[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};k.ATTR_TO=1;k.ATTR_BY=2;k.ATTR_FROM=3;k.prototype._attr=function(l,m,n){l=l.replace(/-[a-z]/gi,function(p){return p.substring(1).toUpperCase();});var o=false;switch(l){case 'background':this._attr('backgroundColor',m,n);return this;case 'margin':m=k.parse_group(m);this._attr('marginBottom',m[0],n);this._attr('marginLeft',m[1],n);this._attr('marginRight',m[2],n);this._attr('marginTop',m[3],n);return this;case 'padding':m=k.parse_group(m);this._attr('paddingBottom',m[0],n);this._attr('paddingLeft',m[1],n);this._attr('paddingRight',m[2],n);this._attr('paddingTop',m[3],n);return this;case 'backgroundColor':case 'borderColor':case 'color':m=k.parse_color(m);break;case 'opacity':m=parseFloat(m,10);break;case 'height':case 'width':if(m=='auto'){o=true;}else m=parseInt(m,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':m=parseInt(m,10);break;default:throw new Error(l+' is not a supported attribute!');}if(this.state.attrs[l]===undefined)this.state.attrs[l]={};if(o)this.state.attrs[l].auto=true;switch(n){case k.ATTR_FROM:this.state.attrs[l].start=m;break;case k.ATTR_BY:this.state.attrs[l].by=true;case k.ATTR_TO:this.state.attrs[l].value=m;break;}};k._get_box_width=function(l){var m=parseInt(i.get(l,'paddingLeft'),10),n=parseInt(i.get(l,'paddingRight'),10),o=parseInt(i.get(l,'borderLeftWidth'),10),p=parseInt(i.get(l,'borderRightWidth'),10);return l.offsetWidth-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k._get_box_height=function(l){var m=parseInt(i.get(l,'paddingTop'),10),n=parseInt(i.get(l,'paddingBottom'),10),o=parseInt(i.get(l,'borderTopWidth'),10),p=parseInt(i.get(l,'borderBottomWidth'),10);return l.offsetHeight-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k.prototype.to=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_TO);}else{this._attr(l,m,k.ATTR_TO);this.last_attr=l;}return this;};k.prototype.by=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_BY);}else{this._attr(l,m,k.ATTR_BY);this.last_attr=l;}return this;};k.prototype.from=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_FROM);}else{this._attr(l,m,k.ATTR_FROM);this.last_attr=l;}return this;};k.prototype.duration=function(l){this.state.duration=l?l:0;return this;};k.prototype.checkpoint=function(l,m){if(l===undefined)l=1;this.state.checkpoint=l;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=m;return this;};k.prototype.blind=function(){this.state.blind=true;return this;};k.prototype.hide=function(){this.state.hide=true;return this;};k.prototype.show=function(){this.state.show=true;return this;};k.prototype.ease=function(l){this.state.ease=l;return this;};k.prototype.go=function(){var l=(new Date()).getTime();this.queue.push(this.state);for(var m=0;m<this.queue.length;m++){this.queue[m].start=l-k.offset;if(this.queue[m].checkpoint)l+=this.queue[m].checkpoint*this.queue[m].duration;}k.push(this);return this;};k.prototype._show=function(){g.show(this.obj);};k.prototype._hide=function(){g.hide(this.obj);};k.prototype._frame=function(l){var m=true,n=false,o=false,p;function q(aa){return document.documentElement[aa]||document.body[aa];}for(var r=0;r<this.queue.length;r++){var s=this.queue[r];if(s.start>l){m=false;continue;}if(s.checkpointcb){this._callback(s.checkpointcb,l-s.start);s.checkpointcb=null;}if(s.started===undefined){if(s.show)this._show();for(var t in s.attrs){if(s.attrs[t].start!==undefined)continue;switch(t){case 'backgroundColor':case 'borderColor':case 'color':p=k.parse_color(i.get(this.obj,t=='borderColor'?'borderLeftColor':t));if(s.attrs[t].by){s.attrs[t].value[0]=Math.min(255,Math.max(0,s.attrs[t].value[0]+p[0]));s.attrs[t].value[1]=Math.min(255,Math.max(0,s.attrs[t].value[1]+p[1]));s.attrs[t].value[2]=Math.min(255,Math.max(0,s.attrs[t].value[2]+p[2]));}break;case 'opacity':p=i.getOpacity(this.obj);if(s.attrs[t].by)s.attrs[t].value=Math.min(1,Math.max(0,s.attrs[t].value+p));break;case 'height':p=k._get_box_height(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'width':p=k._get_box_width(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'scrollLeft':case 'scrollTop':p=(this.obj===document.body)?q(t):this.obj[t];if(s.attrs[t].by)s.attrs[t].value+=p;s['last'+t]=p;break;default:p=parseInt(i.get(this.obj,t),10)||0;if(s.attrs[t].by)s.attrs[t].value+=p;break;}s.attrs[t].start=p;}if((s.attrs.height&&s.attrs.height.auto)||(s.attrs.width&&s.attrs.width.auto)){if(j.firefox()<3)o=true;this._destroy_container();for(var t in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(s.attrs[t])this.obj.style[t]=s.attrs[t].value+(typeof s.attrs[t].value=='number'?'px':'');if(s.attrs.height&&s.attrs.height.auto)s.attrs.height.value=k._get_box_height(this.obj);if(s.attrs.width&&s.attrs.width.auto)s.attrs.width.value=k._get_box_width(this.obj);}s.started=true;if(s.blind)this._build_container();}var u=(l-s.start)/s.duration;if(u>=1){u=1;if(s.hide)this._hide();}else m=false;var v=s.ease?s.ease(u):u;if(!n&&u!=1&&s.blind)n=true;if(o&&this.obj.parentNode){var w=this.obj.parentNode,x=this.obj.nextSibling;w.removeChild(this.obj);}for(var t in s.attrs)switch(t){case 'backgroundColor':case 'borderColor':case 'color':if(s.attrs[t].start[3]!=s.attrs[t].value[3]){this.obj.style[t]='rgba('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+','+k.calc_tween(v,s.attrs[t].start[3],s.attrs[t].value[3],false)+')';}else this.obj.style[t]='rgb('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+')';break;case 'opacity':i.set(this.obj,'opacity',k.calc_tween(v,s.attrs[t].start,s.attrs[t].value));break;case 'height':case 'width':this.obj.style[t]=v==1&&s.attrs[t].auto?'auto':k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var y=this.obj===document.body;p=y?q(t):this.obj[t];if(s['last'+t]!==p){delete s.attrs[t];}else{var z=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true);if(!y){z=this.obj[t]=z;}else{if(t=='scrollLeft'){a.scrollTo(z,q('scrollTop'));}else a.scrollTo(q('scrollLeft'),z);z=q(t);}s['last'+t]=z;}break;default:this.obj.style[t]=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;}if(u==1){this.queue.splice(r--,1);this._callback(s.ondone,l-s.start-s.duration);}}if(o)w[x?'insertBefore':'appendChild'](this.obj,x);if(!n&&this.container_div)this._destroy_container();return !m;};k.prototype.ondone=function(l){this.state.ondone=l;return this;};k.prototype._callback=function(l,m){if(l){k.offset=m;l.call(this);k.offset=0;}};k.calc_tween=function(l,m,n,o){return (o?parseInt:parseFloat)((n-m)*l+m,10);};k.parse_color=function(l){var m=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(l);if(m){return [parseInt(m[1].length==1?m[1]+m[1]:m[1],16),parseInt(m[2].length==1?m[2]+m[2]:m[2],16),parseInt(m[3].length==1?m[3]+m[3]:m[3],16),1];}else{var n=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(l);if(n){return [parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];}else if(l=='transparent'){return [255,255,255,0];}else throw 'Named color attributes are not supported.';}};k.parse_group=function(l){l=l.trim().split(/ +/);if(l.length==4){return l;}else if(l.length==3){return [l[0],l[1],l[2],l[1]];}else if(l.length==2){return [l[0],l[1],l[0],l[1]];}else return [l[0],l[0],l[0],l[0]];};k.push=function(l){if(!k.active)k.active=[];k.active.push(l);if(k.active.length===1){if(!k.requestAnimationFrame){var m=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;if(m)k.requestAnimationFrame=m.bind(a);}if(k.requestAnimationFrame){k.requestAnimationFrame(k._animate);}else k.timeout=setInterval(k._animate,k.resolution,false);}if(k.requestAnimationFrame)k._updateEndingTimer();k._animate(Date.now(),true);};k._updateEndingTimer=function(){if(!k.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var l=0;for(var m=0;m<k.active.length;m++){var n=k.active[m];for(var o=0;o<n.queue.length;o++){var p=n.queue[o].start+n.queue[o].duration;if(p>l)l=p;}}if(k.timeout){clearTimeout(k.timeout);delete k.timeout;}var q=Date.now();if(l>q)k.timeout=setTimeout(k._animate.shield(),l-q,false);};k._animate=function(l,m){l=l||Date.now();for(var n=(m===true)?k.active.length-1:0;n<k.active.length;n++)try{if(!k.active[n]._frame(l))k.active.splice(n--,1);}catch(o){k.active.splice(n--,1);}if(k.active.length===0){if(k.timeout){if(k.requestAnimationFrame){clearTimeout(k.timeout);}else clearInterval(k.timeout);delete k.timeout;}}else if(k.requestAnimationFrame)k.requestAnimationFrame(k._animate);};k.ease={};k.ease.begin=function(l){return Math.sin(Math.PI/2*(l-1))+1;};k.ease.end=function(l){return Math.sin(.5*Math.PI*l);};k.ease.both=function(l){return .5*Math.sin(Math.PI*(l-.5))+.5;};k.prependInsert=function(l,m){k.insert(l,m,h.prependContent);};k.appendInsert=function(l,m){k.insert(l,m,h.appendContent);};k.insert=function(l,m,n){i.set(m,'opacity',0);n(l,m);new k(m).from('opacity',0).to('opacity',1).duration(400).go();};e.exports=k;});
__d("legacy:animation",["Animation"],function(a,b,c,d){a.animation=b('Animation');},3);
__d("ScriptPathState",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h,i,j,k,l=100,m={setIsUIPageletRequest:function(n){j=n;},setUserURISampleRate:function(n){k=n;},reset:function(){h=null;i=false;j=false;},_shouldUpdateScriptPath:function(){return (i&&!j);},_shouldSendURI:function(){return (Math.random()<k);},getParams:function(){var n={};if(m._shouldUpdateScriptPath()){if(m._shouldSendURI()&&h!==null)n.user_uri=h.substring(0,l);}else n.no_script_path=1;return n;}};g.subscribe("pre_page_transition",function(n,o){i=true;h=o.to.getUnqualifiedURI().toString();});e.exports=a.ScriptPathState=m;});
__d("goOrReplace",["URI","UserAgent"],function(a,b,c,d,e,f){var g=b('URI'),h=b('UserAgent');function i(j,k,l){var m=new g(k);if(j.pathname=='/'&&m.getPath()!='/'&&m.isQuicklingEnabled()){var n=j.search?{}:{q:''};m=new g().setPath('/').setQueryData(n).setFragment(m.getUnqualifiedURI()).toString();k=m.toString();}if(l&&!(h.ie()<8)){j.replace(k);}else if(j.href==k){j.reload();}else j.href=k;}e.exports=i;});
__d("AjaxPipeRequest",["Arbiter","AsyncRequest","BigPipe","DOM","Env","JSCC","ScriptPathState","copyProperties","goOrReplace","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('BigPipe'),j=b('DOM'),k=b('Env'),l=b('JSCC'),m=b('ScriptPathState'),n=b('copyProperties'),o=b('goOrReplace'),p=b('ge'),q;function r(u,v){var w=p(u);if(w){if(!v)w.style.minHeight='600px';for(var x in i.pageletIDs)if(u!==x&&j.contains(w,x)){g.inform('ajaxpipe/clear_pagelet',{pagelet_id:x});l.clearForPagelet(x);delete i.pageletIDs[x];}j.empty(w);}}function s(u,v){var w=p(u);if(w)if(!v)w.style.minHeight='100px';}function t(u,v){this._uri=u;this._query_data=v;this._request=new h();this._canvas_id=null;this._allow_cross_page_transition=true;}n(t.prototype,{setCanvasId:function(u){this._canvas_id=u;return this;},setURI:function(u){this._uri=u;return this;},setData:function(u){this._query_data=u;return this;},getData:function(u){return this._query_data;},setAllowCrossPageTransition:function(u){this._allow_cross_page_transition=u;return this;},setAppend:function(u){this._append=u;return this;},send:function(){var u={ajaxpipe:1,ajaxpipe_token:k.ajaxpipe_token};n(u,m.getParams());m.reset();if(this._pageletCacheMiss)u.pcmiss=1;this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(n(u,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition);if(this._automatic){this._relevantRequest=q;}else q=this._request;this._request.send();return this;},_preBootloadFirstResponse:function(u){return false;},_fireDomContentCallback:function(){this._arbiter.inform('ajaxpipe/domcontent_callback',true,g.BEHAVIOR_STATE);},_fireOnloadCallback:function(){this._arbiter.inform('ajaxpipe/onload_callback',true,g.BEHAVIOR_STATE);},_isRelevant:function(u){return this._request==q||(this._automatic&&this._relevantRequest==q)||this._jsNonBlock||this._forceFinish;},_preBootloadHandler:function(u){var v=u.getPayload();if(!v||v.redirect||!this._isRelevant(u))return false;var w=false;if(u.is_first){!this._append&&!this._displayCallback&&r(this._canvas_id,this._constHeight);this._arbiter=new g();w=this._preBootloadFirstResponse(u);this.pipe=new i({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:'ajaxpipe/domcontent_callback',onloadEvt:'ajaxpipe/onload_callback',jsNonBlock:this._jsNonBlock,forceFinish:this._forceFinish,automatic:this._automatic,displayCallback:this._displayCallback});}return w;},_redirect:function(u){if(u.redirect){if(u.force||!this.isPageActive(u.redirect)){var v=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());o(window.location,URI(u.redirect).removeQueryData(v),true);}else PageTransitions.go(u.redirect,true);return true;}else return false;},isPageActive:function(u){return true;},getSanitizedParameters:function(){return [];},_versionCheck:function(u){return true;},_onInitialResponse:function(u){var v=u.getPayload();if(!this._isRelevant(u))return false;if(!v)return true;if(this._redirect(v)||!this._versionCheck(v))return false;return true;},_processFirstResponse:function(u){var v=u.getPayload();if(p(this._canvas_id)&&v.canvas_class!==null)CSS.setClass(this._canvas_id,v.canvas_class);},setFirstResponseCallback:function(u){this._firstResponseCallback=u;return this;},setFirstResponseHandler:function(u){this._processFirstResponse=u;return this;},_onResponse:function(u){var v=u.payload;if(!this._isRelevant(u))return h.suppressOnloadToken;if(u.is_first){this._processFirstResponse(u);this._firstResponseCallback&&this._firstResponseCallback();v.provides=v.provides||[];v.provides.push('uipage_onload');if(this._append)v.append=this._canvas_id;}if(v){if('content' in v.content&&this._canvas_id!==null&&this._canvas_id!='content'){v.content[this._canvas_id]=v.content.content;delete v.content.content;}if(this._pageletCacheMiss)if(u.is_first){v.id=this._pageletCacheMiss.id;v.cacheable=true;v.cache_controller=this._pageletCacheMiss.cache_controller;v.cache_type=this._pageletCacheMiss.cache_type;v.key=this._pageletCacheMiss.key;}else v.cache_parent=this._pageletCacheMiss.id;this.pipe.onPageletArrive(v);}if(u.is_last)s(this._canvas_id,this._constHeight);return h.suppressOnloadToken;},setNectarModuleDataSafe:function(u){this._request.setNectarModuleDataSafe(u);return this;},setFinallyHandler:function(u){this._request.setFinallyHandler(u);return this;},setErrorHandler:function(u){this._request.setErrorHandler(u);return this;},abort:function(){this._request.abort();if(q==this._request)q=null;this._request=null;return this;},setJSNonBlock:function(u){this._jsNonBlock=u;return this;},setForceFinish:function(u){this._forceFinish=u;return this;},setAutomatic:function(u){this._automatic=u;return this;},setDisplayCallback:function(u){this._displayCallback=u;return this;},setPageletCacheMiss:function(u){this._pageletCacheMiss=u;return this;},setConstHeight:function(u){this._constHeight=u;return this;},getAsyncRequest:function(){return this._request;}});n(t,{getCurrentRequest:function(){return q;},setCurrentRequest:function(u){q=u;}});e.exports=t;});
__d("Button",["event-extensions","CSS","DataStore","DOM","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('Parent'),k='uiButtonDisabled',l='uiButtonDepressed',m='button:blocker',n='href',o='ajaxify';function p(t,u){var v=h.get(t,m);if(u){if(v){v.remove();h.remove(t,m);}}else if(!v)h.set(t,m,Event.listen(t,'click',bagof(false),Event.Priority.URGENT));}function q(t){var u=j.byClass(t,'uiButton');if(!u)throw new Error('invalid use case');return u;}function r(t){return i.isNodeOfType(t,'a');}var s={getInputElement:function(t){t=q(t);if(r(t))throw new Error('invalid use case');return i.find(t,'input');},isEnabled:function(t){return !g.hasClass(q(t),k);},setEnabled:function(t,u){t=q(t);g.conditionClass(t,k,!u);if(r(t)){var v=t.href,w=t.getAttribute('ajaxify'),x=h.get(t,n,'#'),y=h.get(t,o);if(u){if(!v)t.href=x;if(!w&&y)t.setAttribute('ajaxify',y);}else{if(v&&v!==x)h.set(t,n,v);if(w&&w!==y)h.set(t,o,w);t.removeAttribute('href');t.removeAttribute('ajaxify');}p(t,u);}else{var z=s.getInputElement(t);z.disabled=!u;p(z,u);}},setDepressed:function(t,u){g.conditionClass(q(t),l,u);},isDepressed:function(t){return g.hasClass(q(t),l);},setLabel:function(t,u){t=q(t);if(r(t)){var v=i.find(t,'span.uiButtonText');i.setContent(v,u);}else s.getInputElement(t).value=u;g.conditionClass(t,'uiButtonNoText',!u);},setIcon:function(t,u){if(u&&!i.isNode(u))return;t=q(t);var v=i.scry(t,'.img')[0];if(!u){v&&i.remove(v);return;}g.addClass(u,'customimg');if(v!=u)if(v){i.replace(v,u);}else i.prependContent(t,u);}};e.exports=s;});
__d("CSSSupport",[],function(a,b,c,d,e,f){var g={supportsBorderRadius:function(){var h=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'],i=false,j=document.createElement('div');for(var k=h.length;k>=0;k--)if(i=j.style[h[k]]!==undefined)break;g.supportsBorderRadius=bagof(i);return i;}};e.exports=g;});
__d("Keys",[],function(a,b,c,d,e,f){var g={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188};e.exports=g;});
__d("Locale",["Style"],function(a,b,c,d,e,f){var g=b('Style'),h,i={isRTL:function(){if(h===undefined)h=('rtl'===g.get(document.body,'direction'));return h;}};e.exports=i;});
__d("getOverlayZIndex",["Style"],function(a,b,c,d,e,f){var g=b('Style');function h(i,j){j=j||document.body;var k=[];while(i&&i!==j){k.push(i);i=i.parentNode;}if(i!==j)return 0;for(var l=k.length-1;l>=0;l--){var m=k[l];if(g.get(m,'position')!='static'){var n=parseInt(g.get(m,'z-index'),10);if(!isNaN(n))return n;}}return 0;}e.exports=h;});
__d("Dialog",["array-extensions","event-extensions","AjaxPipeRequest","Animation","Arbiter","AsyncRequest","Bootloader","Button","CSS","CSSSupport","DOM","Form","HTML","Input","Keys","Locale","Parent","Run","Style","URI","UserAgent","Vector","bind","copyProperties","createArrayFrom","getObjectValues","getOverlayZIndex","tx"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('AjaxPipeRequest'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('Bootloader'),l=b('Button'),m=b('CSS'),n=b('CSSSupport'),o=b('DOM'),p=b('Form'),q=b('HTML'),r=b('Input'),s=b('Keys'),t=b('Locale'),u=b('Parent'),v=b('Run'),w=b('Style'),x=b('URI'),y=b('UserAgent'),z=b('Vector'),aa=b('bind'),ba=b('copyProperties'),ca=b('createArrayFrom'),da=b('getObjectValues'),ea=b('getOverlayZIndex'),fa=b('tx'),ga=function(){var ia=document.body,ja=document.createElement('div'),ka=document.createElement('div');ia.insertBefore(ja,ia.firstChild);ia.insertBefore(ka,ia.firstChild);ja.style.position='fixed';ja.style.top='20px';var la=ja.offsetTop!==ka.offsetTop;ia.removeChild(ja);ia.removeChild(ka);ga=bagof(la);return la;};function ha(ia){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+ha._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(ia)this._setFromModel(ia);ha._init();}ba(ha,{OK:{name:'ok',label:"Okay"},CANCEL:{name:'cancel',label:"Cancel",className:'inputaux'},CLOSE:{name:'close',label:"Close"},NEXT:{name:'next',label:"Next"},SAVE:{name:'save',label:"Save"},SUBMIT:{name:'submit',label:"Submit"},CONFIRM:{name:'confirm',label:"Confirm"},DELETE:{name:'delete',label:"Delete"},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){ha.max_bottom=Math.max.apply(Math,ha._bottoms);}});ba(ha,{OK_AND_CANCEL:[ha.OK,ha.CANCEL],_STANDARD_BUTTONS:[ha.OK,ha.CANCEL,ha.CLOSE,ha.SAVE,ha.SUBMIT,ha.CONFIRM,ha.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],_isUsingCSSBorders:function(){return n.supportsBorderRadius()||y.ie()<7;},newButton:function(ia,ja,ka,la){var ma={name:ia,label:ja};if(ka)ma.className=ka;if(la)ma.handler=la;return ma;},getCurrent:function(){var ia=ha._stack;return ia.length?ia[ia.length-1]:null;},hideCurrent:function(){var ia=ha.getCurrent();ia&&ia.hide();},bootstrap:function(ia,ja,ka,la,ma,na){ja=ja||{};ba(ja,new x(ia).getQueryData());la=la||(ka?'GET':'POST');var oa=u.byClass(na,'stat_elem')||na;if(oa&&m.hasClass(oa,'async_saving'))return false;var pa=new j().setReadOnly(!!ka).setMethod(la).setRelativeTo(na).setStatusElement(oa).setURI(ia).setNectarModuleDataSafe(na).setData(ja),qa=new ha(ma).setCausalElement(na).setAsync(pa);qa.show();return false;},showFromModel:function(ia,ja){var ka=new ha(ia).setCausalElement(ja).show();if(ia.hiding)ka.hide();},_init:function(){this._init=bagofholding;v.onLeave(ha._tearDown.shield(null,false));i.subscribe('page_transition',ha._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==s.ESC&&!event.getModifiers().any){if(ha._escape())event.kill();}else if(Event.getKeyCode(event)==s.RETURN&&!event.getModifiers().any)if(ha._enter())event.kill();});Event.listen(window,'resize',function(event){var ia=ha.getCurrent();ia&&ia._resetDialogObj();});},_findButton:function(ia,ja){if(ia)for(var ka=0;ka<ia.length;++ka)if(ia[ka].name==ja)return ia[ka];return null;},_tearDown:function(ia){var ja=ha._stack.slice();for(var ka=ja.length-1;ka>=0;ka--)if((ia&&!ja[ka]._cross_transition)||(!ia&&!ja[ka]._cross_quickling))ja[ka].hide();},_escape:function(){var ia=ha.getCurrent();if(!ia)return false;var ja=ia._semi_modal,ka=ia._buttons;if(!ka.length&&!ja)return false;if(ja&&!ka.length){ia.hide();return true;}var la,ma=ha._findButton(ka,'cancel');if(ia._cancelHandler){ia.cancel();return true;}else if(ma){la=ma;}else if(ka.length==1){la=ka[0];}else return false;ia._handleButton(la);return true;},_enter:function(){var ia=ha.getCurrent();if(!ia||!ia._submit_on_enter)return false;if(document.activeElement!=ia._frame)return false;var ja=ia._buttons;if(!ja)return false;ia._handleButton(ja[0]);return true;},call_or_eval:function(ia,ja,ka){if(!ja)return undefined;ka=ka||{};if(typeof ja=='string'){var la=Object.keys(ka).join(', ');ja=(eval)('({f: function('+la+') { '+ja+'}})').f;}return ja.apply(ia,da(ka));}});ba(ha.prototype,{_cross_quickling:false,_cross_transition:false,_loading:false,_showing:false,show:function(){this._showing=true;if(this._async_request){if(this._show_loading)this.showLoading();}else this._update();return this;},showLoading:function(){this._loading=true;m.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&ha._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return o.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);if(!ia||!ia.name)return null;var ja=o.scry(this._popup,'input'),ka=function(la){return la.name==ia.name;};return ja.filter(ka)[0]||null;},getContentNode:function(){return o.find(this._content,'div.dialog_content');},getFormData:function(){return p.serialize(this.getContentNode());},setAllowCrossPageTransition:function(ia){this._cross_transition=ia;return this;},setAllowCrossQuicklingNavigation:function(ia){this._cross_quickling=ia;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(ia){var ja=this._nodes.title,ka=this._nodes.title_inner,la=this._nodes.content;o.setContent(ka,this._format(ia||''));m.conditionShow(ja,!!ia);m.conditionClass(la,'dialog_content_titleless',!ia);return this;},setBody:function(ia){o.setContent(this._nodes.body,this._format(ia));return this;},setExtraData:function(ia){this._extra_data=ia;return this;},setReturnData:function(ia){this._return_data=ia;return this;},setShowLoading:function(ia){this._show_loading=ia;return this;},setFullBleed:function(ia){this._full_bleed=ia;this._updateWidth();m.conditionClass(this._obj,'full_bleed',ia);return this;},setCausalElement:function(ia){this._causal_elem=ia;return this;},setUserData:function(ia){this._user_data=ia;return this;},getUserData:function(){return this._user_data;},setAutohide:function(ia){if(ia){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),ia);}else this._autohide=ia;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(ia){var ja=this._nodes.summary;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setButtons:function(ia){var ja,ka;if(!(ia instanceof Array)){ja=ca(arguments);}else ja=ia;for(var la=0;la<ja.length;++la)if(typeof ja[la]=='string'){ka=ha._findButton(ha._STANDARD_BUTTONS,ja[la]);ja[la]=ka;}this._buttons=ja;var ma=[];if(ja&&ja.length>0)for(var na=0;na<ja.length;na++){ka=ja[na];var oa=o.create('input',{type:'button',name:ka.name||'',value:ka.label}),pa=o.create('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},oa);if(ka.className){ka.className.split(/\s+/).forEach(function(ra){m.addClass(pa,ra);});if(m.hasClass(pa,'inputaux')){m.removeClass(pa,'inputaux');m.removeClass(pa,'uiButtonConfirm');}if(m.hasClass(pa,'uiButtonSpecial'))m.removeClass(pa,'uiButtonConfirm');}if(ka.icon)o.prependContent(pa,o.create('img',{src:ka.icon,className:'img mrs'}));if(ka.disabled)l.setEnabled(pa,false);Event.listen(oa,'click',this._handleButton.bind(this,ka.name));for(var qa in ka)if(qa.indexOf('data-')===0&&qa.length>5)oa.setAttribute(qa,ka[qa]);ma.push(pa);}o.setContent(this._nodes.buttons,ma);this._updateButtonVisibility();return this;},setButtonsMessage:function(ia){o.setContent(this._nodes.button_message,this._format(ia||''));this._has_button_message=!!ia;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var ia=this._buttons.length>0||this._has_button_message;m.conditionShow(this._nodes.button_wrapper,ia);m.conditionClass(this._obj,'omitDialogFooter',!ia);},setClickButtonOnEnter:function(ia,ja){this._clickOnEnterTarget=ia;if(!this._clickOnEnterListener)this._clickOnEnterListener=Event.listen(this._nodes.body,'keypress',function(event){var ka=event.getTarget();if(ka&&ka.id===this._clickOnEnterTarget)if(Event.getKeyCode(event)==s.RETURN){this._handleButton(ja);event.kill();}return true;}.bind(this));return this;},setStackable:function(ia,ja){this._is_stackable=ia;this._shown_while_stacked=ia&&ja;return this;},setHandler:function(ia){this._handler=ia;return this;},setCancelHandler:function(ia){this._cancelHandler=ha.call_or_eval.bind(null,this,ia);return this;},setCloseHandler:function(ia){this._close_handler=ha.call_or_eval.bind(null,this,ia);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(ia,ja){if(ja===undefined)ja=true;if(ja){this.setHandler(this._submitForm.bind(this,'POST',ia));}else this.setHandler(function(){p.post(ia,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(ia){this.setHandler(this._submitForm.bind(this,'GET',ia));return this;},setModal:function(ia){this._modal=ia;m.conditionClass(this._obj,'generic_dialog_modal',ia);return this;},setSemiModal:function(ia){if(ia){this.setModal(true);this._semiModalListener=Event.listen(this._obj,'click',function(ja){if(!o.contains(this._popup,ja.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=ia;return this;},setWideDialog:function(ia){this._wide_dialog=ia;this._updateWidth();return this;},setContentWidth:function(ia){this._content_width=ia;this._updateWidth();return this;},setTitleLoading:function(ia){if(ia===undefined)ia=true;var ja=o.find(this._popup,'h2.dialog_title');if(ja)m.conditionClass(ja,'loading',ia);return this;},setSecure:function(ia){m.conditionClass(this._nodes.title,'secure',ia);return this;},setClassName:function(ia){ia.split(/\s+/).forEach(m.addClass.bind(m,this._obj));return this;},setFadeEnabled:function(ia){this._fade_enabled=ia;return this;},setFooter:function(ia){var ja=this._nodes.footer;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setAutoFocus:function(ia){this._auto_focus=ia;return this;},setTop:function(ia){this._top=ia;this._resetDialogObj();return this;},onloadRegister:function(ia){ca(ia).forEach(function(ja){if(typeof ja=='string')ja=new Function(ja);this._onload_handlers.push(ja.bind(this));}.bind(this));return this;},setAsyncURL:function(ia){return this.setAsync(new j(ia));},setAsync:function(ia){var ja=function(ra){if(this._async_request!=ia)return;this._async_request=null;var sa=ra.getPayload(),ta=sa;if(this._loading)this._showing=true;if(typeof ta=='string'){this.setBody(ta);}else this._setFromModel(ta);this._update();}.bind(this),ka=ia.getData();ka.__d=1;ia.setData(ka);var la=ia.getHandler()||bagofholding;ia.setHandler(function(ra){la(ra);ja(ra);});var ma=ia,na=ma.getErrorHandler()||bagofholding,oa=ma.getTransportErrorHandler()||bagofholding,pa=function(){this._async_request=null;this._loading=false;if(this._showing&&this._shown_while_stacked){this._update();}else this._hide(this._is_stackable);}.bind(this),qa=ma.getServerDialogCancelHandler()||pa;ma.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(ra){pa();na(ra);}).setTransportErrorHandler(function(ra){pa();oa(ra);}).setServerDialogCancelHandler(qa);ia.send();this._async_request=ia;if(this._showing)this.show();return this;},_format:function(ia){if(typeof ia=='string'){ia=q(ia);}else ia=q.replaceJSONWrapper(ia);if(ia instanceof q)ia.setDeferred(true);return ia;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(aa(this,'hide'),this._autohide);m.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;r.focus(this._frame);},_runOnloads:function(){for(var ia=0;ia<this._onload_handlers.length;++ia)try{this._onload_handlers[ia]();}catch(ja){}this._onload_handlers=[];},_updateWidth:function(){var ia=2*ha._BORDER_WIDTH;if(ha._isUsingCSSBorders())ia+=2*ha._HALO_WIDTH;if(this._content_width){ia+=this._content_width;if(!this._full_bleed)ia+=2*ha._PADDING_WIDTH;}else if(this._wide_dialog){ia+=ha.SIZE.WIDE;}else ia+=ha.SIZE.STANDARD;this._popup.style.width=ia+'px';},_updateZIndex:function(){if(!this._hasSetZIndex&&this._causal_elem){var ia=ea(this._causal_elem);this._hasSetZIndex=ia>(this._modal?400:200);w.set(this._obj,'z-index',this._hasSetZIndex?ia:'');}},_renderDialog:function(){this._updateZIndex();this._pushOntoStack();this._obj.style.height=(this._modal&&y.ie()<7)?z.getDocumentDimensions().y+'px':null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=false;if(this._auto_focus){var ia=p.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(ia){p.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var ja=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms.push(ja);this._bottom=ja;ha._updateMaxBottom();return this;},_buildDialog:function(){this._obj=o.create('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';o.appendContent(document.body,this._obj);if(!this._popup)this._popup=o.create('div',{className:'generic_dialog_popup'});this._obj.appendChild(this._popup);if(y.ie()<7&&!this._shim)k.loadModules(['IframeShim'],function(ua){this._shim=new ua(this._popup);});m.addClass(this._obj,'pop_dialog');if(t.isRTL())m.addClass(this._obj,'pop_dialog_rtl');var ia;if(ha._isUsingCSSBorders()){ia='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else ia='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';o.setContent(this._popup,q(ia));var ja=o.find(this._popup,'div.pop_content');ja.setAttribute('tabIndex','0');ja.setAttribute('role','alertdialog');this._frame=this._content=ja;var ka=o.create('div',{className:'dialog_loading'},"Loading..."),la=o.create('span'),ma=o.create('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},la),na=o.create('div',{className:'dialog_summary hidden_elem'}),oa=o.create('div',{className:'dialog_body'}),pa=o.create('div'),qa=o.create('div',{className:'dialog_buttons_msg'}),ra=o.create('div',{className:'dialog_buttons clearfix hidden_elem'},[qa,pa]),sa=o.create('div',{className:'dialog_footer hidden_elem'}),ta=o.create('div',{className:'dialog_content'},[na,oa,ra,sa]);this._nodes={summary:na,body:oa,buttons:pa,button_message:qa,button_wrapper:ra,footer:sa,content:ta,title:ma,title_inner:la};o.setContent(this._frame,[ma,ta,ka]);},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var ia=2*ha._PAGE_MARGIN,ja=z.getViewportDimensions(),ka=ja.x-ia,la=ja.y-ia,ma=2*ha._HALO_WIDTH,na=z.getElementDimensions(this._content),oa=na.x+ma,pa=na.y+ma,qa=this._top,ra=ka-oa,sa=la-pa;if(sa<0){qa=ha._PAGE_MARGIN;}else if(qa>sa)qa=ha._PAGE_MARGIN+(Math.max(sa,0)/2);var ta=ga();if(!ta)qa+=z.getScrollPosition().y;w.set(this._popup,'marginTop',qa+'px');var ua=ta&&(ra<0||sa<0);m.conditionClass(this._obj,'generic_dialog_fixed_overflow',ua);m.conditionClass(document.documentElement,'generic_dialog_overflow_mode',ua);},_fadeOut:function(ia){if(!this._popup)return;try{new h(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,ia)).go();}catch(ja){this._hide(ia);}},_hide:function(ia){if(this._obj)this._obj.style.display='none';m.removeClass(document.documentElement,'generic_dialog_overflow_mode');this._updateShim();clearInterval(this.active_hiding);if(this._bottom){var ja=ha._bottoms;ja.splice(ja.indexOf(this._bottom),1);ha._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&o.contains(this._obj,document.activeElement))r.focus(this._previous_focus);if(ia)return;this.destroy();},destroy:function(){this._popFromStack();if(this._obj){o.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);var ja=ha.call_or_eval(ia,ia.handler);if(ja===false)return;if(ia.name=='cancel'){this.cancel();}else if(ha.call_or_eval(this,this._handler,{button:ia})!==false)this.hide();},_submitForm:function(ia,ja,ka){var la=this.getFormData();if(ka)la[ka.name]=ka.label;if(this._extra_data)ba(la,this._extra_data);var ma=new j().setURI(ja).setData(la).setMethod(ia).setNectarModuleDataSafe(this._causal_elem).setReadOnly(ia=='GET');this.setAsync(ma);return false;},_setFromModel:function(ia){var ja={};ba(ja,ia);for(var ka in ja){if(ka=='onloadRegister'){this.onloadRegister(ja[ka]);continue;}var la=this['set'+ka.substr(0,1).toUpperCase()+ka.substr(1)];la.apply(this,ca(ja[ka]));}},_updateBottom:function(){var ia=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms[ha._bottoms.length-1]=ia;ha._updateMaxBottom();},_pushOntoStack:function(){var ia=ha._stack;if(!ia.length)i.inform('layer_shown',{type:'Dialog'});ia.remove(this);ia.push(this);for(var ja=ia.length-2;ja>=0;ja--){var ka=ia[ja];if(!ka._is_stackable&&!ka._async_request){ka._hide();}else if(!ka._shown_while_stacked)ka._hide(true);}},_popFromStack:function(){var ia=ha._stack,ja=(ia[ia.length-1]===this);ia.remove(this);if(ia.length){if(ja)ia[ia.length-1].show();}else i.inform('layer_hidden',{type:'Dialog'});}});e.exports=ha;});
__d("legacy:dialog",["Dialog"],function(a,b,c,d){var e=b('Dialog');a.Dialog=e;},3);
__d("legacy:array-utils",["createArrayFrom","hasArrayNature"],function(a,b,c,d){a.$A=b('createArrayFrom');a.hasArrayNature=b('hasArrayNature');},3);
__d("legacy:env",["Env"],function(a,b,c,d){var e=b('Env');a.Env=e;},3);
__d("debounce",[],function(a,b,c,d,e,f){function g(h,i,j,k){if(i==null)i=100;var l;function m(n,o,p,q,r){m.reset();l=setTimeout(function(){h.call(j,n,o,p,q,r);},i,!k);}m.reset=function(){clearTimeout(l);};return m;}e.exports=g;});
__d("throttle",[],function(a,b,c,d,e,f){function g(h,i,j,k){if(i==null)i=100;var l,m,n,o,p,q,r,s,t=0,u=Math.min(i,100);function v(){r&&h.call(j,l,m,n,o,p);r=false;}return function w(x,y,z,aa,ba){r=true;l=x;m=y;n=z;o=aa;p=ba;q=Date.now();var ca=s?i:u;if(q-t-i>ca){s=null;v();}if(!s){t=q;s=setTimeout(function(){s=null;v();},i,!k);}};}e.exports=g;});
__d("deferUntil",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){var m=i();if(m){h(m);return null;}var n=Date.now(),o=setInterval(function(){m=i();if(!m){if(!j||(j<new Date()-n))return;l&&l();}clearInterval(o);h(m);},20,k);return o;}e.exports=g;});
__d("legacy:function-utils",["debounce","throttle","deferUntil"],function(a,b,c,d){a.debounce=b('debounce');a.throttle=b('throttle');a.defer_until=b('deferUntil');},3);
__d("computeRelativeURI",["URI","isEmpty"],function(a,b,c,d,e,f){var g=b('URI'),h=b('isEmpty');function i(k,l){if(!l)return k;if(l.charAt(0)=='/')return l;var m=k.split('/').slice(0,-1);m[0]!=='';l.split('/').forEach(function(n){if(!(n=='.'))if(n=='..'){if(m.length>1)m=m.slice(0,-1);}else m.push(n);});return m.join('/');}function j(k,l){var m=new g(),n=l;k=new g(k);l=new g(l);if(l.getDomain()&&!l.isFacebookURI())return n;var o=k,p=['Protocol','Domain','Port','Path','QueryData','Fragment'];p.forEach(function(q){var r=q=='Path'&&o===k;if(r)m.setPath(i(k.getPath(),l.getPath()));if(!h(l['get'+q]()))o=l;if(!r)m['set'+q](o['get'+q]());});return m;}e.exports=j;});
__d("HistoryManager",["event-extensions","function-extensions","Cookie","Env","URI","UserAgent","copyProperties","goOrReplace"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Cookie'),h=b('Env'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties'),l=b('goOrReplace'),m={_IFRAME_BASE_URI:'http://static.ak.facebook.com/common/history_manager.php',history:null,current:0,fragment:null,_setIframeSrcFragment:function(n){n=n.toString();var o=m.history.length-1;m.iframe.src=m._IFRAME_BASE_URI+'?|index='+o+'#'+encodeURIComponent(n);return m;},getIframeSrcFragment:function(){return decodeURIComponent(i(m.iframe.contentWindow.document.location.href).getFragment());},nextframe:function(n,o){if(o){m._setIframeSrcFragment(n);return;}if(n!==undefined){m.iframeQueue.push(n);}else{m.iframeQueue.splice(0,1);m.iframeTimeout=null;m.checkURI();}if(m.iframeQueue.length&&!m.iframeTimeout){var p=m.iframeQueue[0];m.iframeTimeout=setTimeout(function(){m._setIframeSrcFragment(p);},100,false);}},isInitialized:function(){return !!m._initialized;},init:function(){if(!h.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(m._initialized)return m;var n=i(),o=n.getFragment()||'';if(o.charAt(0)==='!'){o=o.substr(1);n.setFragment(o);}if(i.getRequestURI(false).getProtocol().toLowerCase()=='https')m._IFRAME_BASE_URI='https://s-static.ak.facebook.com/common/history_manager.php';k(m,{_initialized:true,fragment:o,orig_fragment:o,history:[n],callbacks:[],lastChanged:Date.now(),canonical:i('#'),fragmentTimeout:null,user:0,iframeTimeout:null,iframeQueue:[],enabled:true,debug:bagofholding});if(window.history&&history.pushState){this.lastURI=document.URL;window.history.replaceState(this.lastURI,null);Event.listen(window,'popstate',function(p){if(p&&p.state&&m.lastURI!=p.state){m.lastURI=p.state;m.lastChanged=Date.now();m.notify(i(p.state).getUnqualifiedURI().toString());}}.bind(m));if(j.safari()<534||j.chrome()<=13){setInterval(m.checkURI,42,false);m._updateRefererURI(this.lastURI);}return m;}m._updateRefererURI(i.getRequestURI(false));if(j.safari()<500||j.firefox()<2){m.enabled=false;return m;}if(j.ie()<8){m.iframe=document.createElement('iframe');k(m.iframe.style,{width:'0',height:'0',frameborder:'0',left:'0',top:'0',position:'absolute'});m._setIframeSrcFragment(o);document.body.insertBefore(m.iframe,document.body.firstChild);}else if('onhashchange' in window){Event.listen(window,'hashchange',function(){m.checkURI.bind(m).defer();});}else setInterval(m.checkURI,42,false);return m;},registerURIHandler:function(n){m.callbacks.push(n);return m;},setCanonicalLocation:function(n){m.canonical=i(n);return m;},notify:function(n){if(n==m.orig_fragment)n=m.canonical.getFragment();for(var o=0;o<m.callbacks.length;o++)try{if(m.callbacks[o](n))return true;}catch(p){}return false;},checkURI:function(){if(Date.now()-m.lastChanged<400)return;if(window.history&&history.pushState){var n=i(document.URL).removeQueryData('ref').toString(),o=i(m.lastURI).removeQueryData('ref').toString();if(n!=o){m.lastChanged=Date.now();m.lastURI=n;if(j.safari()<534)m._updateRefererURI(n);m.notify(i(n).getUnqualifiedURI().toString());}return;}if(j.ie()<8&&m.iframeQueue.length)return;if(j.safari()&&window.history.length==200){if(!m.warned)m.warned=true;return;}var p=i().getFragment();if(p.charAt(0)=='!')p=p.substr(1);if(j.ie()<8)p=m.getIframeSrcFragment();p=p.replace(/%23/g,'#');if(p!=m.fragment.replace(/%23/g,'#')){m.debug([p,' vs ',m.fragment,'whl: ',window.history.length,'QHL: ',m.history.length].join(' '));for(var q=m.history.length-1;q>=0;--q)if(m.history[q].getFragment().replace(/%23/g,'#')==p)break;++m.user;if(q>=0){m.go(q-m.current);}else m.go('#'+p);--m.user;}},_updateRefererURI:function(n){n=n.toString();if(n.charAt(0)!='/'&&n.indexOf('//')==-1)return;var o=new i(window.location);if(o.isFacebookURI()){var p=o.getPath()+window.location.search;}else var p='';var q=i(n).getQualifiedURI().setFragment(p).toString(),r=2048;if(q.length>r)q=q.substring(0,r)+'...';g.set('x-referer',q);},go:function(n,o,p){if(window.history&&history.pushState){o||typeof(n)=='number';var q=i(n).removeQueryData('ref').toString();m.lastChanged=Date.now();this.lastURI=q;if(p){window.history.replaceState(n,null,q);}else window.history.pushState(n,null,q);if(j.safari()<534)m._updateRefererURI(n);return false;}m.debug('go: '+n);if(o===undefined)o=true;if(!m.enabled)if(!o)return false;if(typeof(n)=='number'){if(!n)return false;var r=n+m.current,s=Math.max(0,Math.min(m.history.length-1,r));m.current=s;r=m.history[s].getFragment()||m.orig_fragment;r=i(r).removeQueryData('ref').getUnqualifiedURI().toString();m.fragment=r;m.lastChanged=Date.now();if(j.ie()<8){if(m.fragmentTimeout)clearTimeout(m.fragmentTimeout);m._temporary_fragment=r;m.fragmentTimeout=setTimeout(function(){window.location.hash='#!'+r;delete m._temporary_fragment;},750,false);if(!m.user)m.nextframe(r,p);}else if(!m.user)l(window.location,window.location.href.split('#')[0]+'#!'+r,p);if(o)m.notify(r);m._updateRefererURI(r);return false;}n=i(n);if(n.getDomain()==i().getDomain())n=i('#'+n.getUnqualifiedURI());var t=m.history[m.current].getFragment(),u=n.getFragment();if(u==t||(t==m.orig_fragment&&u==m.canonical.getFragment())){if(o)m.notify(u);m._updateRefererURI(u);return false;}if(p)m.current--;var v=(m.history.length-m.current)-1;m.history.splice(m.current+1,v);m.history.push(i(n));return m.go(1,o,p);},getCurrentFragment:function(){var n=m._temporary_fragment!==undefined?m._temporary_fragment:i.getRequestURI(false).getFragment();return n==m.orig_fragment?m.canonical.getFragment():n;}};e.exports=m;});
__d("ViewportBounds",["Style","ge"],function(a,b,c,d,e,f){var g=b('Style'),h=b('ge'),i={top:[],right:[],bottom:[],left:[]};function j(n){return function(){var o=0;i[n].forEach(function(p){o=Math.max(o,p.getSize());});return o;};}function k(n){return function(o){return new l(n,o);};}function l(n,o){this.getSide=bagof(n);this.getSize=function(){return typeof o==='function'?o():o;};i[n].push(this);}l.prototype.remove=function(){i[this.getSide()].remove(this);};var m={getTop:j('top'),getRight:j('right'),getBottom:j('bottom'),getLeft:j('left'),addTop:k('top'),addRight:k('right'),addBottom:k('bottom'),addLeft:k('left')};m.addTop(function(){var n=h('blueBar');if(n&&g.isFixed(n))return h('blueBarHolder').offsetHeight;return 0;});e.exports=m;});
__d("DOMScroll",["Animation","Arbiter","DOM","DOMQuery","UserAgent","Vector","ViewportBounds","ge"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('DOM'),j=b('DOMQuery'),k=b('UserAgent'),l=b('Vector'),m=b('ViewportBounds'),n=b('ge'),o={SCROLL:'dom-scroll',getScrollState:function(){var p=l.getViewportDimensions(),q=l.getDocumentDimensions(),r=(q.x>p.x),s=(q.y>p.y);r+=0;s+=0;return new l(r,s);},_scrollbarSize:null,_initScrollbarSize:function(){var p=i.create('p');p.style.width='100%';p.style.height='200px';var q=i.create('div');q.style.position='absolute';q.style.top='0px';q.style.left='0px';q.style.visibility='hidden';q.style.width='200px';q.style.height='150px';q.style.overflow='hidden';q.appendChild(p);document.body.appendChild(q);var r=p.offsetWidth;q.style.overflow='scroll';var s=p.offsetWidth;if(r==s)s=q.clientWidth;document.body.removeChild(q);o._scrollbarSize=r-s;},getScrollbarSize:function(){if(o._scrollbarSize===null)o._initScrollbarSize();return o._scrollbarSize;},scrollTo:function(p,q,r,s,t){if(typeof q=='undefined'||q===true)q=750;if(k.osx()===10.8&&k.safari()===536.25&&!k.chrome())q=false;if(!(p instanceof l)){var u=l.getScrollPosition().x,v=l.getElementPosition(n(p)).y;p=new l(u,v,'document');if(!s)p.y-=m.getTop()/(r?2:1);}if(r){p.y-=l.getViewportDimensions().y/2;}else if(s){p.y-=l.getViewportDimensions().y;p.y+=s;}p=p.convertTo('document');if(q){return new g(document.body).to('scrollTop',p.y).to('scrollLeft',p.x).ease(g.ease.end).duration(q).ondone(t).go();}else if(window.scrollTo){window.scrollTo(p.x,p.y);t&&t();}h.inform(o.SCROLL);},ensureVisible:function(p,q,r,s,t){if(r===undefined)r=10;p=n(p);if(q)p=j.find(p,q);var u=l.getScrollPosition().x,v=l.getScrollPosition().y,w=v+l.getViewportDimensions().y,x=l.getElementPosition(p).y,y=x+l.getElementDimensions(p).y;x-=m.getTop();x-=r;y+=r;if(x<v){o.scrollTo(new l(u,x,'document'),s,false,false,t);}else if(y>w)if(x-(y-w)<v){o.scrollTo(new l(u,x,'document'),s,false,false,t);}else o.scrollTo(new l(u,y,'document'),s,false,true,t);},scrollToTop:function(p){var q=l.getScrollPosition();o.scrollTo(new l(q.x,0,'document'),p!==false);}};e.exports=o;});
__d("JSLogger",[],function(a,b,c,d,e,f){var g={MAX_HISTORY:500,counts:{},categories:{},seq:0,pageId:(Math.random()*2147483648|0).toString(36),forwarding:false};function h(l){if(l instanceof Error&&a.ErrorUtils)l=a.ErrorUtils.normalizeError(l);try{return JSON.stringify(l);}catch(m){return '{}';}}function i(l,event,m){if(!g.counts[l])g.counts[l]={};if(!g.counts[l][event])g.counts[l][event]=0;m=m==null?1:Number(m);g.counts[l][event]+=isFinite(m)?m:0;}g.logAction=function(event,l,m){if(this.type=='bump'){i(this.cat,event,l);}else if(this.type=='rate'){(l&&i(this.cat,event+'_n',m));i(this.cat,event+'_d',m);}else{var n={cat:this.cat,type:this.type,event:event,data:l!=null?h(l):null,date:Date.now(),seq:g.seq++};g.head=g.head?(g.head.next=n):(g.tail=n);while(g.head.seq-g.tail.seq>g.MAX_HISTORY)g.tail=g.tail.next;return n;}};function j(l){if(!g.categories[l]){g.categories[l]={};var m=function(n){var o={cat:l,type:n};g.categories[l][n]=function(){g.forwarding=false;var p=null;if(document.domain!='facebook.com')return;p=g.logAction;if(/^\/+(dialogs|plugins?)\//.test(location.pathname)){g.forwarding=false;}else try{p=a.top.require('JSLogger')._.logAction;g.forwarding=p!==g.logAction;}catch(q){}(p&&p.apply(o,arguments));};};m('debug');m('log');m('warn');m('error');m('bump');m('rate');}return g.categories[l];}function k(l,m){var n=[];for(var o=m||g.tail;o;o=o.next)if(!l||l(o)){var p={type:o.type,cat:o.cat,date:o.date,event:o.event,seq:o.seq};if(o.data)p.data=JSON.parse(o.data);n.push(p);}return n;}e.exports={_:g,DUMP_EVENT:'jslogger/dump',create:j,getEntries:k};});
__d("LinkController",["event-extensions","DataStore","Parent","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DataStore'),h=b('Parent'),i=b('trackReferrer'),j='LinkControllerHandler',k=[],l=[];function m(event){var q=h.byTag(event.getTarget(),'a'),r=q&&q.getAttribute('href',2);if(!r||q.rel||!o(r)||g.get(q,j))return;var s=Event.listen(q,'click',function(t){if(r.charAt(r.length-1)=='#'){t.prevent();return;}i(q,r);n(q,t);});g.set(q,j,s);}function n(q,event){if(q.target||event.getModifiers().any||(event.which&&event.which!=1))return;var r=k.concat(l);for(var s=0,t=r.length;s<t;s++)if(r[s](q,event)===false)return event.prevent();}function o(q){var r=q.match(/^(\w+):/);return !r||r[1].match(/^http/i);}var p={registerHandler:function(q){k.push(q);},registerFallbackHandler:function(q){l.push(q);}};Event.listen(document.documentElement,'mousedown',m);Event.listen(document.documentElement,'keydown',m);e.exports=p;});
__d("htmlSpecialChars",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h===null||!h.toString)return '';if(h===false){return '0';}else if(h===true)return '1';return h.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}e.exports=g;});
__d("htmlize",["htmlSpecialChars"],function(a,b,c,d,e,f){var g=b('htmlSpecialChars');function h(i){return g(i).replace(/\r\n|[\r\n]/g,'<br />');}e.exports=h;});
__d("escapeJSQuotes",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h==null||!h.valueOf())return '';return h.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}e.exports=g;});
__d("areObjectsEqual",[],function(a,b,c,d,e,f){function g(h,i){return JSON.stringify(h)==JSON.stringify(i);}e.exports=g;});
__d("PageTransitions",["event-extensions","Arbiter","Dialog","DOM","DOMScroll","Env","Form","HistoryManager","JSLogger","LinkController","OnloadHooks","htmlize","escapeJSQuotes","URI","UserAgent","Vector","areObjectsEqual","clickRefAction","computeRelativeURI","copyProperties","ge","goOrReplace","startsWith","tx","userAction"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Dialog'),i=b('DOM'),j=b('DOMScroll'),k=b('Env'),l=b('Form'),m=b('HistoryManager'),n=b('JSLogger'),o=b('LinkController'),p=b('OnloadHooks'),q=b('htmlize'),r=b('escapeJSQuotes'),s=b('URI'),t=b('UserAgent'),u=b('Vector'),v=b('areObjectsEqual'),w=b('clickRefAction'),x=b('computeRelativeURI'),y=b('copyProperties'),z=b('ge'),aa=b('goOrReplace'),ba=b('startsWith'),ca=b('tx'),da=b('userAction'),ea={};function fa(ka,la){ea[ka.getUnqualifiedURI()]=la;}function ga(ka){return ea[ka.getUnqualifiedURI()];}function ha(ka){delete ea[ka.getUnqualifiedURI()];}var ia={_transition_handlers:[],_scroll_locked:false,isInitialized:function(){return !!ia._initialized;},_init:function(){if(!k.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(ia._initialized)return ia;ia._initialized=true;var ka=s.getRequestURI(false),la=ka.getUnqualifiedURI(),ma=s(la).setFragment(null),na=la.getFragment();if(na.charAt(0)==='!'&&ma.toString()===na.substr(1))la=ma;y(ia,{_current_uri:la,_most_recent_uri:la,_next_uri:la});var oa;if(ba(ka.getFragment(),'/')){oa=ka.getFragment();}else oa=la;m.init().setCanonicalLocation('#'+oa).registerURIHandler(ia._historyManagerHandler);o.registerFallbackHandler(ia._rewriteHref);o.registerFallbackHandler(ia._onlinkclick);Event.listen(document.documentElement,'submit',ia._onformsubmit);Event.listen(window,'scroll',function(){if(!ia._scroll_locked)fa(ia._current_uri,u.getScrollPosition());});return ia;},registerHandler:function(ka,la){ia._init();la=la||5;if(!ia._transition_handlers[la])ia._transition_handlers[la]=[];ia._transition_handlers[la].push(ka);},getCurrentURI:function(ka){if(!ia._current_uri&&!ka)return new s(ia._most_recent_uri);return new s(ia._current_uri);},getMostRecentURI:function(){return new s(ia._most_recent_uri);},getNextURI:function(){return new s(ia._next_uri);},_rewriteHref:function(ka){var la=ka.getAttribute('href'),ma=x(ia._most_recent_uri.getQualifiedURI(),la).toString();if(la!=ma)ka.setAttribute('href',ma);},_onlinkclick:function(ka){ja.lookBusy(ka);ia.go(ka.getAttribute('href'));return false;},_onformsubmit:function(event){var ka=event.getTarget();if(l.getAttribute(ka,'rel')||l.getAttribute(ka,'target'))return;w('form',ka,event).set_namespace('page_transition');var la=da('page_transitions',ka,event,{mode:'DEDUP'}).uai_fallback(null,'form'),ma=a.ArbiterMonitor;if(ma)ma.initUA(la,[ka]);var na=new s(l.getAttribute(ka,'action')||''),oa=x(ia._most_recent_uri,na);ka.setAttribute('action',oa.toString());if((l.getAttribute(ka,'method')||'GET').toUpperCase()==='GET'){ia.go(oa.addQueryData(l.serialize(ka)));event.kill();}},go:function(ka,la){var ma=new s(ka).removeQueryData('quickling').getQualifiedURI();n.create('pagetransition').debug('go',{uri:ma.toString()});ha(ma);!la&&w('uri',{href:ma.toString()},null,'INDIRECT');ja.lookBusy();ia._loadPage(ma,function(na){if(na){m.go(ma.toString(),false,la);}else aa(window.location,ma,la);});},_historyManagerHandler:function(ka){if(ka.charAt(0)!='/')return false;w('h',{href:ka});da('page_transitions').uai(null,'history_manager');ia._loadPage(new s(ka),function(la){if(!la)aa(window.location,ka,true);});return true;},_loadPage:function(ka,la){if(s(ka).getFragment()&&v(s(ka).setFragment(null).getQualifiedURI(),s(ia._current_uri).setFragment(null).getQualifiedURI())){ia._current_uri=ia._most_recent_uri=ka;ia.restoreScrollPosition();ja.stopLookingBusy();return;}var ma;if(ia._current_uri)ma=ga(ia._current_uri);ia._current_uri=null;ia._next_uri=ka;if(ma)j.scrollTo(ma,false);var na=function(){ia._scroll_locked=true;var pa=ia._handleTransition(ka);la&&la(pa);},oa=p.runHooks('onbeforeleavehooks');if(oa){ja.stopLookingBusy();ia._warnBeforeLeaving(oa,na);}else na();},_handleTransition:function(ka){window.onbeforeleavehooks=undefined;ja.lookBusy();if(!ka.isSameOrigin())return false;var la=window.AsyncRequest&&window.AsyncRequest.getLastID();g.inform("pre_page_transition",{from:ia.getMostRecentURI(),to:ka});for(var ma=ia._transition_handlers.length-1;ma>=0;--ma){var na=ia._transition_handlers[ma];if(!na)continue;for(var oa=na.length-1;oa>=0;--oa)if(na[oa](ka)===true){var pa={sender:this,uri:ka,id:la};try{g.inform("page_transition",pa);}catch(qa){}return true;}else na.splice(oa,1);}return false;},unifyURI:function(){ia._current_uri=ia._most_recent_uri=ia._next_uri;},transitionComplete:function(ka){ia._executeCompletionCallback();ja.stopLookingBusy();ia.unifyURI();if(!ka)ia.restoreScrollPosition();try{if(document.activeElement&&document.activeElement.nodeName==='A')document.activeElement.blur();}catch(la){}},_executeCompletionCallback:function(){if(ia._completionCallback)ia._completionCallback();ia._completionCallback=null;},setCompletionCallback:function(ka){ia._completionCallback=ka;},rewriteCurrentURI:function(ka,la){ia.registerHandler(function(){if(ka==ia.getMostRecentURI().getUnqualifiedURI().toString()){ia.transitionComplete();return true;}});ia.go(la,true);},_warnBeforeLeaving:function(ka,la){new h().setTitle("Are you sure you want to leave this page?").setBody(q(ka)).setButtons([{name:'leave_page',label:"Leave this Page",handler:la},{name:'continue_editing',label:"Stay on this Page",className:'inputaux'}]).setModal(true).show();},restoreScrollPosition:function(){ia._scroll_locked=false;var ka=ia._current_uri,la=ga(ka);if(la){j.scrollTo(la,false);return;}function ma(pa){if(!pa)return null;var qa="a[name='"+r(pa)+"']";return i.scry(document.body,qa)[0]||z(pa);}var na=ma(s(ka).getFragment());if(na){var oa=u.getElementPosition(na);oa.x=0;j.scrollTo(oa);}}},ja=window._BusyUIManager||{_looking_busy:false,_original_cursors:[],lookBusy:function(ka){if(ka)ja._giveProgressCursor(ka);if(ja._looking_busy)return;ja._looking_busy=true;ja._giveProgressCursor(document.documentElement);},stopLookingBusy:function(){if(!ja._looking_busy)return;ja._looking_busy=false;while(ja._original_cursors.length){var ka=ja._original_cursors.pop(),la=ka[0],ma=ka[1];if(la.style)la.style.cursor=ma||'';}},_giveProgressCursor:function(ka){if(!t.safari()){ja._original_cursors.push([ka,ka.style.cursor]);ka.style.cursor='progress';}}};e.exports=ia;});
__d("legacy:page-transitions",["computeRelativeURI","HistoryManager","PageTransitions"],function(a,b,c,d){a.computeRelativeURI=b('computeRelativeURI');a.HistoryManager=a.HistoryManager||b('HistoryManager');a.PageTransitions=a.PageTransitions||b('PageTransitions');},3);
__d("FlipDirectionOnKeypress",["event-extensions","DOM","Input","Style"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Input'),i=b('Style');Event.listen(document.documentElement,'keyup',function(event){var j=event.getTarget();if(!g.isNodeOfType(j,['input','textarea']))return;if(g.isNodeOfType(j,'input')&&j.type=='password')return;if(j.getAttribute('data-prevent-auto-flip'))return;var k=h.getValue(j),l=(j.style&&j.style.direction);if(!l){var m=0,n=true;for(var o=0;o<k.length;o++){var p=k.charCodeAt(o);if(p>=48){if(n){n=false;m++;}if(p>=1470&&p<=1920){i.set(j,'direction','rtl');return;}if(m==5){i.set(j,'direction','ltr');return;}}else n=true;}}else if(k.length===0)i.set(j,'direction','');});});
__d("PlaceholderOnsubmitFormListener",["event-extensions","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Input');Event.listen(document.documentElement,'submit',function(h){var i=h.getTarget().getElementsByTagName('*');for(var j=0;j<i.length;j++)if(i[j].getAttribute('placeholder')&&g.isEmpty(i[j]))g.setValue(i[j],'');});});
__d("LiveTimer",["CSS","DOM","UserAgent","tx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('UserAgent'),j=b('tx'),k={restart:function(l){this.serverTime=l;this.localStartTime=Date.now()/1000;this.updateTimeStamps();},getApproximateServerTime:function(){return (this.serverTime-this.localStartTime)*1000+Date.now();},getServerTimeOffset:function(){return (this.serverTime-this.localStartTime)*1000;},updateTimeStamps:function(){k.timestamps=h.scry(document.body,'abbr.livetimestamp');k.startLoop(20000);},addTimeStamps:function(l){if(!l)return;k.timestamps=k.timestamps||[];if(h.isNodeOfType(l,'abbr')&&g.hasClass(l,'livetimestamp')){k.timestamps.push(l);}else{var m=h.scry(l,'abbr.livetimestamp');for(var n=0;n<m.length;++n)k.timestamps.push(m[n]);}k.startLoop(0);},startLoop:function(l){this.stop();this.timeout=setTimeout(function(){k.loop();},l);},stop:function(){clearTimeout(this.timeout);},updateNode:function(l,m){k.updateNode=(i.ie()<7)?bagofholding:h.setContent;k.updateNode(l,m);},loop:function(l){if(l)k.updateTimeStamps();var m=Math.floor(k.getApproximateServerTime()/1000),n=-1;k.timestamps&&k.timestamps.forEach(function(p){var q=p.getAttribute('data-utime'),r=k.renderRelativeTime(m,q);if(r.text)k.updateNode(p,r.text);if(r.next!=-1&&(r.next<n||n==-1))n=r.next;});if(n!=-1){var o=Math.max(20000,n*1000);k.timeout=setTimeout(function(){k.loop();},o);}},renderRelativeTime:function(l,m){var n={text:"",next:-1};if(l-m>(12*3600))return n;var o=l-m,p=Math.floor(o/60),q=Math.floor(p/60);if(p<1){n.text="a few seconds ago";n.next=60-o%60;return n;}if(q<1){if(p==1){n.text="about a minute ago";}else n.text=j._("{number} minutes ago",{number:p});n.next=60-o%60;return n;}if(q!=11)n.next=3600-o%3600;if(q==1){n.text="about an hour ago";return n;}n.text=j._("{number} hours ago",{number:q});return n;},renderRelativeTimeToServer:function(l){return k.renderRelativeTime(Math.floor(k.getApproximateServerTime()/1000),l);}};e.exports=k;});
__d("legacy:live-timer",["LiveTimer"],function(a,b,c,d){a.LiveTimer=b('LiveTimer');},3);
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior.bind(this));return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}}};e.exports=k;});
__d("DimensionTracking",["event-extensions","AsyncSignal","Cookie","DOMDimensions","isInIframe"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncSignal'),h=b('Cookie'),i=b('DOMDimensions'),j=b('isInIframe');function k(){var l=i.getViewportDimensions();h.set('wd',l.width+'x'+l.height);if(Math.random()<.01)new g('/ajax/dimension_context.php',{x:l.width,y:l.height}).send();}if(!j()){setTimeout(k,100);Event.listen(window,'resize',k);Event.listen(window,'focus',k);}});
__d("DocumentTitle",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=document.title,i=null,j=1500,k=[],l=0,m=null,n=false;function o(){if(k.length>0){if(!n){p(k[l].title);l=++l%k.length;}else q();}else{clearInterval(m);m=null;q();}}function p(s){document.title=s;n=true;}function q(){r.set(i||h,true);n=false;}var r={get:function(){return h;},set:function(s,t){document.title=s;if(!t){h=s;i=null;g.inform('update_title',s);}else i=s;},blink:function(s){var t={title:s};k.push(t);if(m===null)m=setInterval(o,j);return {stop:function(){var u=k.indexOf(t);if(u>=0){k.splice(u,1);if(l>u){l--;}else if(l==u&&l==k.length)l=0;}}};}};e.exports=r;});
__d("JSONPTransport",["DOM","HTML","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('HTML'),i=b('URI'),j=b('copyProperties'),k={},l=2,m='jsonp',n='iframe';function o(p,q,r){this._type=p;this._uri=q;this._handler=r;k[this.getID()]=this;}j(o,{respond:function(p,q,r){var s=k[p];if(s){if(!r)delete k[p];if(s._type==n)q=JSON.parse(JSON.stringify(q));a.async_callback(s.handleResponse.bind(s),'json')(q);}else if(a.logJSError&&!r)a.logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:p,uri:(q.payload&&q.payload.uri)||''}});}});j(o.prototype,{getID:function(){return this._id||(this._id=l++);},hasFinished:function(){return !(this.getID() in k);},getRequestURI:function(){return i(this._uri).addQueryData({__a:1,__adt:this.getID()});},createTransportFrame:function(){var p='transport_frame_'+this.getID(),q=h('<iframe class="hidden_elem" name="'+p+'" src="javascript:void(0)" />');return g.appendContent(document.body,q)[0];},send:function(){if(this._type===m){(function(){g.appendContent(document.body,g.create('script',{src:this.getRequestURI().toString(),type:'text/javascript'}));}).bind(this).defer();}else{this._iframe=this.createTransportFrame();this._iframe.src=this.getRequestURI().toString();}},handleResponse:function(p){if(!this._aborted)this._handler(p);if(this.hasFinished())if(this._iframe){g.remove.curry(this._iframe).defer();this._iframe=null;}},abort:function(){this._aborted=true;}});e.exports=o;});
__d("MultiBootstrapDataSource",["Class","DataSource"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DataSource');function i(j){this._bootstrapEndpoints=j.bootstrapEndpoints;this.parent.construct(this,j);}g.extend(i,h);i.prototype.bootstrapWithoutToken=function(){for(var j=0;j<this._bootstrapEndpoints.length;j++)this.fetch(this._bootstrapEndpoints[j].endpoint,this._bootstrapEndpoints[j].data||{},{bootstrap:true});};e.exports=i;});
__d("PixelRatio",["Arbiter","Cookie","Run"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Cookie'),i=b('Run'),j='dpr',k,l;function m(){return window.devicePixelRatio||1;}function n(){h.set(j,m());}function o(){h.clear(j);}function p(){var r=m();if(r!==k){n();}else o();}var q={startDetecting:function(r){k=r||1;o();if(l)return;l=[g.subscribe('pre_page_transition',p)];i.onBeforeUnload(p);}};e.exports=q;});
__d("PostLoadJS",["Bootloader","Run"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Run');function i(k,l){h.onAfterLoad(function(){g.loadModules.call(g,[k],l);});}var j={loadAndRequire:function(k){i(k,bagofholding);},loadAndCall:function(k,l,m){i(k,function(n){n[l].apply(n,m);});}};e.exports=j;});
__d("InputSelection",["DOM","Input"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Input'),i={get:function(j){if(!document.selection)return {start:j.selectionStart,end:j.selectionEnd};var k=document.selection.createRange();if(k.parentElement()!==j)return {start:0,end:0};var l=j.value.length;if(g.isNodeOfType(j,'input')){return {start:-k.moveStart('character',-l),end:-k.moveEnd('character',-l)};}else{var m=k.duplicate();m.moveToElementText(j);m.setEndPoint('StartToEnd',k);var n=l-m.text.length;m.setEndPoint('StartToStart',k);return {start:l-m.text.length,end:n};}},set:function(j,k,l){if(typeof l=='undefined')l=k;if(document.selection){if(j.tagName=='TEXTAREA'){var m=(j.value.slice(0,k).match(/\r/g)||[]).length,n=(j.value.slice(k,l).match(/\r/g)||[]).length;k-=m;l-=m+n;}var o=j.createTextRange();o.collapse(true);o.moveStart('character',k);o.moveEnd('character',l-k);o.select();}else{j.selectionStart=k;j.selectionEnd=Math.min(l,j.value.length);h.focus(j);}}};e.exports=i;});
__d("SoundRPC",["event-extensions","SoundSynchronizer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('SoundSynchronizer');function h(j,k,l){g.play(j,k,l);}var i={playLocal:h,playRemote:function(j,k,l,m){var n={paths:k,sync:l,loop:m};j.postMessage(JSON.stringify(n),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){Event.listen(window,'message',function(j){if(!/\.facebook.com$/.test(j.origin))return;var k=JSON.parse(j.data);h(k.paths,k.sync,k.loop);});}};e.exports=i;});
__d("UntrustedLink",["DOM","event-extensions","URI","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('event-extensions'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties');function l(m,n,o,p){this.dom=m;this.url=m.href;this.hash=n;this.func_get_params=p||function(){return {};};Event.listen(this.dom,'click',this.onclick.bind(this));Event.listen(this.dom,'mousedown',this.onmousedown.bind(this));Event.listen(this.dom,'mouseup',this.onmouseup.bind(this));Event.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown(h.$E(o));}l.bootstrap=function(m,n,o,p){if(m.__untrusted)return;m.__untrusted=true;new l(m,n,o,p);};l.prototype.getRewrittenURI=function(){var m=k({u:this.url,h:this.hash},this.func_get_params(this.dom)),n=new i('/l.php');return n.setQueryData(m).setSubdomain('www').setProtocol('http');};l.prototype.onclick=function(){(function(){this.setHref(this.url);}).bind(this).defer(100);this.setHref(this.getRewrittenURI());};l.prototype.onmousedown=function(m){if(m.button==2)this.setHref(this.getRewrittenURI());};l.prototype.onmouseup=function(){this.setHref(this.getRewrittenURI());};l.prototype.onmouseout=function(){this.setHref(this.url);};l.prototype.setHref=function(m){if(j.ie()<9){var n=g.create('span');g.appendContent(this.dom,n);this.dom.href=m;g.remove(n);}else this.dom.href=m;};e.exports=l;});
__d("throttleAcrossTransitions",["throttle"],function(a,b,c,d,e,f){var g=b('throttle');function h(i,j,k){return g(i,j,k,true);}e.exports=h;});
__d("UserActionHistory",["Arbiter","ClickRefUtils","throttleAcrossTransitions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ClickRefUtils'),i=b('throttleAcrossTransitions'),j={click:1,submit:1},k=false,l={log:[],len:0},m=i(function(){try{k._ua_log=JSON.stringify(l);}catch(p){k=false;}},1000);function n(){try{if(a.sessionStorage){k=a.sessionStorage;k._ua_log&&(l=JSON.parse(k._ua_log));}}catch(p){k=false;}l.log[l.len%10]={ts:Date.now(),path:'-',index:l.len,type:'init',iref:'-'};l.len++;g.subscribe("UserAction/new",function(q,r){var s=r.ua,t=r.node,event=r.event;if(!event||!(event.type in j))return;var u={path:window._script_path,type:event.type,ts:s._ue_ts,iref:h.get_intern_ref(t)||'-',index:l.len};l.log[l.len++%10]=u;k&&m();});}function o(){return l.log.sort(function(p,q){return (q.ts!=p.ts)?(q.ts-p.ts):(q.index-p.index);});}n();e.exports={getHistory:o};});
__d("UserActivity",["event-extensions","Arbiter","ClickRefUtils","collectDataAttributes"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ClickRefUtils'),i=b('collectDataAttributes'),j=5000,k=500,l=Date.now(),m=l,n={subscribeOnce:function(p){var q=n.subscribe(function(){n.unsubscribe(q);p();});},subscribe:function(p){return g.subscribe('useractivity/activity',p);},unsubscribe:function(p){p.unsubscribe();},isActive:function(p){return (new Date()-l<(p||n.DEFAULT_IDLE_MS));},getLastInformTime:function(){return m;}};function o(event){l=Date.now();var p=l-m;if(p>k){m=l;g.inform('useractivity/activity',{event:event,idleness:p});}}Event.listen(window,'scroll',o);Event.listen(document.documentElement,{DOMMouseScroll:o,mousewheel:o,keydown:o,mouseover:o,click:o});e.exports=n;});
__d("curry",["bind"],function(a,b,c,d,e,f){var g=b('bind'),h=g(null,g,null);e.exports=h;});
__d("enforceMaxLength",["event-extensions","function-extensions","DOM","Input","InputSelection"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('DOM'),h=b('Input'),i=b('InputSelection'),j=function(m,n){var o=h.getValue(m),p=o.length,q=p-n;if(q>0){var r,s;try{r=i.get(m);s=r.end;}catch(t){r=null;s=0;}if(s>=q)p=s;var u=p-q;if(u&&(o.charCodeAt(u-1)&64512)===55296)u--;s=Math.min(s,u);h.setValue(m,o.slice(0,u)+o.slice(p));if(r)i.set(m,Math.min(r.start,s),s);}},k=function(event){var m=event.getTarget(),n=m.getAttribute&&parseInt(m.getAttribute('maxlength'),10);if(n>0&&g.isNodeOfType(m,['input','textarea']))j.bind(null,m,n).defer();},l='maxLength' in g.create('input')&&'maxLength' in g.create('textarea');if(!l)Event.listen(document.documentElement,{keydown:k,paste:k});e.exports=j;});
__d("setTimeoutAcrossTransitions",[],function(a,b,c,d,e,f){function g(h,i){return setTimeout(h,i,false);}e.exports=g;});
__d("submitForm",["DOM"],function(a,b,c,d,e,f){var g=b('DOM'),h=function(i){var j=g.scry(i,'input[type="submit"]')[0];if(j){j.click();}else{j=g.create('input',{type:'submit',className:'hidden_elem'});g.appendContent(i,j);j.click();g.remove(j);}};e.exports=h;});
function FutureSideNav(){FutureSideNav.instance&&FutureSideNav.instance.uninstall();FutureSideNav.instance=this;}FutureSideNav.instance=null;FutureSideNav.getInstance=function(){return FutureSideNav.instance||new FutureSideNav();};copyProperties(FutureSideNav.prototype,{init:function(a,b,c){this.root=a;this.items={};this.sections={};this.editor=null;this.editing=false;this.selected=null;this.loading=null;this.keyParam='sk';this.defaultKey=b;this.uri=URI.getRequestURI();this.ajaxPipe=c;this.ajaxPipeEndpoints={};this.sidecol=true;this._installed=true;this._handlePageTransitions=true;PageTransitions.registerHandler(function(d){return this._handlePageTransitions&&this.handlePageTransition(d);}.bind(this));this._eventHandlers=[];this._arbiterSubscriptions=[Arbiter.subscribe(NavigationMessage.NAVIGATION_COMPLETED,this.navigationComplete.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_FAILED,this.navigationFailed.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_SELECT,this.navigationSelect.bind(this)),Arbiter.subscribe(ChannelConstants.getArbiterType('nav_update_counts'),this.navigationCountUpdateFromPresence.bind(this))];this._explicitHover=[];this._ensureHover('sideNavItem');this._eventHandlers.push(Event.listen(window,'resize',this._handleResize.bind(this)));this._checkNarrow();this._selectorSubscriptions=[];window.Selector&&this._selectorSubscriptions.push(Selector.subscribe(['open','close'],function(d,e){var f=Parent.byClass(e.selector,'sideNavItem');f&&CSS.conditionClass(f,'editMenuOpened',d==='open');}));onleaveRegister(this.uninstall.bind(this));if(this._pendingSections)this._pendingSections.forEach(function(d){this.initSection.apply(this,d);}.bind(this));},_handleResize:(function(){var a;return function(){a&&clearTimeout(a);a=this._checkNarrow.bind(this).defer(200);};})(),_checkNarrow:function(){CSS.conditionClass(this.root,'uiNarrowSideNav',Vector2.getElementPosition(this.root).x<20);},_ensureHover:function(a){if(ua.ie()<8)Bootloader.loadComponents('explicit-hover',function(){this._explicitHover.push(new ExplicitHover(this.root,a));}.bind(this));},uninstall:function(){if(this._installed){this._installed=false;this._handlePageTransitions=false;this._arbiterSubscriptions.forEach(Arbiter.unsubscribe);this._selectorSubscriptions.forEach(function(a){Selector.unsubscribe(a);});this._eventHandlers.forEach(function(a){a.remove();});this._explicitHover.forEach(function(a){a.uninstall();});}},initSection:function(a,b){if(!this._installed){this._pendingSections=this._pendingSections||[];this._pendingSections.push(arguments);return;}this._initItems(b);this._initSection(a);},addItem:function(a,b){this._initItem(a,b);},_initItems:function(a){var b=function(c,d){var e=this._initItem(c,d);if(c.children)c.children.forEach(function(f){b(f,e);});}.bind(this);$A(a).forEach(function(c){b(c,null);});},_initItem:function(a,b){var c=this.items[a.id]=this._constructItem(a,b);if(c.equals(this.selected)||a.selected)this.setSelected(c);var d=c.getLinkNode();d&&this._eventHandlers.push(Event.listen(d,'click',function(event){return !this.editing;}.bind(this)));return c;},_initSection:function(a){var b=this.sections[a.id]=this._constructSection(a);this._eventHandlers.push(Event.listen(b.node,'click',this.handleSectionClick.bind(this,b)));DOM.scry(b.node,'div.bookmarksMenuButton').forEach(CSS.show);return b;},_constructItem:function(a,b){return new FutureSideNavItem(a,b);},_constructSection:function(a){return new FutureSideNavSection(a);},handleSectionClick:function(a,event){var b=this._getEventTarget(event,'a'),c=this._getItemForNode(b);if(!b){return;}else if(CSS.hasClass(b.parentNode,'uiMenuItem')){this._handleMenuClick(a,c,b.parentNode,event);}else this._handleLinkClick(a,b,event);},_getEventTarget:function(event,a){var b=event.getTarget();if(b.tagName!==a.toUpperCase()){return Parent.byTag(b,a);}else return b;},_handleMenuClick:function(a,b,c,event){if(CSS.hasClass(c,'rearrange'))this.beginEdit(a);},_handleLinkClick:function(a,b,event){if(CSS.hasClass(b,'navEditDone')){this.editing?this.endEdit():this.beginEdit(a);event.kill();}},getItem:function(a){if(this._isCurrentPath(a)){return this._getItemForKey(this._getKey(a.getQueryData())||this.defaultKey);}else return this._getItemForPath(a.getPath());},getNodeForKey:function(a){var b=this._getItemForKey(a);if(b)return b.node;},_isCurrentPath:function(a){return a.getDomain()===this.uri.getDomain()&&a.getPath()===this.uri.getPath();},_getKey:function(a){return a[this.keyParam];},_getItemForNode:function(a){a=Parent.byClass(a,'sideNavItem');return a&&this.items[a.id];},_getItemForKey:function(a){return this._findItem(function(b){return b.matchKey(a);});},_getItemForPath:function(a){return this._findItem(function(b){return b.matchPath(a);});},_findItem:function(a){for(var b in this.items)if(a(this.items[b]))return this.items[b];},removeItem:function(a){if(a&&this.items[a.id]){DOM.remove(a.node);delete this.items[a.id];}},removeItemByKey:function(a){this.removeItem(this._getItemForKey(a));},moveItem:function(a,b,c){var d=DOM.find(a.node,'ul.uiSideNav');(c?DOM.prependContent:DOM.appendContent)(d,b.node);},setLoading:function(a){this.loading&&this.loading.hideLoading();this.loading=a;this.loading&&this.loading.showLoading();},setSelected:function(a){this.setLoading(null);if(this.selected){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=a;if(this.selected){this.selected.showSelected();this.selected.getTop().showChildren();}},handlePageTransition:function(a){var b=this.getItem(a),c=b&&b.endpoint&&this._doPageTransition(b,a);return c;},_doPageTransition:function(a,b){this.setLoading(a);this._sendPageTransition(a.endpoint,copyProperties(this._getTransitionData(a,b),b.getQueryData()));return true;},_sendPageTransition:function(a,b){b.endpoint=a;Arbiter.inform(NavigationMessage.NAVIGATION_BEGIN,{useAjaxPipe:this._useAjaxPipe(a),params:b});},_getTransitionData:function(a,b){var c={};c.sidecol=this.sidecol;c.path=b.getPath();c[this.keyParam]=a.textKey;c.key=a.textKey;return c;},_useAjaxPipe:function(a){return this.ajaxPipe||this.ajaxPipeEndpoints[a];},navigationComplete:function(){this.loading&&this.setSelected(this.loading);},navigationFailed:function(){this.setLoading(null);},navigationSelect:function(a,b){var c=this._getItemForKey(this._getKey(b));if(b.asLoading){this.setLoading(c);}else this.setSelected(c);},navigationCountUpdate:function(a,b){var c=this._getItemForKey(b&&b.key);if(c)if(typeof b.count!=="undefined"){c.setCount(b.count,b.hide);}else if(typeof b.increment!=="undefined")c.incrementCount(b.increment,b.hide);},navigationCountUpdateFromPresence:function(a,b){b=b.obj;if(b)if(!b.class_name||b.class_name&&CSS.hasClass(this.root,b.class_name))if(b.items)for(var c=0;c<b.items.length;c++)this.navigationCountUpdate(a,b.items[c]);},beginEdit:function(a){if(!this.editing){this.editing=true;CSS.addClass(this.root,'editMode');this._updateTrackingData();Bootloader.loadComponents('sortable-side-nav-js',this._initEditor.bind(this,a));}},endEdit:function(){if(this.editing){CSS.removeClass(this.root,'editMode');this.editor.endEdit();this.editor=null;this.editing=false;this._updateTrackingData();}},_updateTrackingData:function(a){var b=this.root.getAttribute('data-gt')||"{}";try{b=JSON.parse(b);if(this.editing){b.editing=true;}else delete b.editing;this.root.setAttribute('data-gt',JSON.stringify(b));}catch(c){}},_initEditor:function(a){this.editor=a.getEditor();this.editor.beginEdit();}});function FutureSideNavSection(a){this.id=a.id;this.node=this.node||$(a.id);this.editEndpoint=a.editEndpoint;}copyProperties(FutureSideNavSection.prototype,{equals:function(a){return a&&a.id===this.id;},getEditor:function(){return new SortableSideNav(DOM.find(this.node,'ul.uiSideNav'),this.editEndpoint);}});function FutureSideNavItem(a,b){this.id=a.id;this.up=b;this.endpoint=a.endpoint;this.type=a.type;this.node=a.node||$(a.id);this.paths=a.path?$A(a.path):[];this.keys=a.key?$A(a.key):[];var c=this._findKeys(this.keys);this.numericKey=c.numeric||this.keys[0];this.textKey=c.text||this.keys[0];this._pathPattern=this._buildRegex(this.paths);this._keyPattern=this._buildRegex(this.keys);this.hideLoading();this.hideSelected();}copyProperties(FutureSideNavItem.prototype,{equals:function(a){return a&&a.id===this.id;},getLinkNode:function(){return (DOM.scry(this.node,'a.item')[0]||DOM.scry(this.node,'a.subitem')[0]);},matchPath:function(a){return this._matchInput(this._pathPattern,a);},matchKey:function(a){return this._matchInput(this._keyPattern,a);},_matchInput:function(a,b){var c=a&&a.exec(b);return c&&c.slice(1);},getTop:function(){return this.isTop()?this:this.up.getTop();},isTop:function(a){return !this.up;},setCount:function(a,b){return this._updateCount(a,true);},incrementCount:function(a,b){return this._updateCount(a,false);},_updateCount:function(a,b,c){var d=DOM.scry(this.node,'span.count')[0],e=d&&DOM.scry(d,'span.countValue')[0];if(e){var f=b?0:parseInt(DOM.getText(e),10),g=Math.max(0,f+a),h=this.isTop()?'hidden':'hiddenSubitem';DOM.setContent(e,g);c&&CSS.conditionClass(this.node,h,!g);CSS.conditionClass(d,'hidden_elem',!g);if(this.isTop()){var i=DOM.scry(this.node,'div.linkWrap')[0];if(i){CSS.conditionClass(i,'noCount',!g);CSS.conditionClass(i,'hasCount',g);}}}Arbiter.inform('NavigationMessage.COUNT_UPDATE_DONE');},showLoading:function(){CSS.addClass(this.node,'loading');},hideLoading:function(){CSS.removeClass(this.node,'loading');},showSelected:function(){CSS.addClass(this.node,'selectedItem');CSS.hasClass(this.node,'hider')&&CSS.addClass(this._getExpanderParent(),'expandedMode');},hideSelected:function(){CSS.removeClass(this.node,'selectedItem');},showChildren:function(){CSS.addClass(this.node,'open');},hideChildren:function(){CSS.removeClass(this.node,'open');},_getExpanderParent:function(){return Parent.byClass(this.node,'expandableSideNav');},_buildRegex:function(a){if(a.length){var b=a.map(function(c){if(typeof c==="string"){return c.replace(/([^a-z0-9_])/ig,'\\$1');}else if(c&&c.regex)return c.regex;});return new RegExp('^(?:'+b.join('|')+')$');}},_findKeys:function(a){var b=/^(app|group|fl)_/,c={};for(var d=0;d<a.length;d++){var e=b.test(a[d]);if(e&&!c.numeric){c.numeric=a[d];}else if(!e&&!c.text)c.text=a[d];if(c.numeric&&c.text)break;}return c;}});
function fbpage_set_fan_status(a,b,c,d,e,f,g){e=e?e:function(j){_fbpage_show_change_status_feedback(a,j.getPayload());};var h={fbpage_id:b,add:c,reload:d};if(g!=null)copyProperties(h,g);var i=new AsyncRequest().setURI('/ajax/pages/fan_status.php').setData(h).setNectarModuleDataSafe(a).setHandler(e);if(f)i.setErrorHandler(f);i.send();return false;}function fbpage_set_favorite_status(a,b,c){var d=function(){_fbpage_show_change_status_feedback(a,this.getUserData());},e={fbpage_id:b,add:c},f=new AsyncRequest().setMethod('POST').setURI('/ajax/pages/favorite_status.php').setData(e);new Dialog().setAsync(f).setCloseHandler(d).show();return false;}function _fbpage_show_change_status_feedback(a,b){if(!b||!a)return;if(b.reload){fbpage_reload_on_fan_status_changed(b.preserve_tab);}else fbpage_redraw_on_fan_status_changed(a,b.feedback);}function fbpage_reload_on_fan_status_changed(a){var b=URI.getRequestURI();if(a){var c=FutureSideNav.getInstance().selected.textKey;if(!b.getQueryData().sk&&c)b.addQueryData({sk:c});}window.location.href=b;}function fbpage_redraw_on_fan_status_changed(a,b){if(!b)return;if(Parent.byClass(a,'fbTimelineEscapeSectionItem'))a=Parent.byClass(a,'fan_status_inactive')||a;var c=DOM.create('span',{className:'fan_status_inactive'},b);a.parentNode.replaceChild(c,a);var d=function(){if(data.can_repeat_action)c.parentNode.replaceChild(a,c);};animation(c).duration(3000).checkpoint().to('backgroundColor','#FFFFFF').duration(1000).ondone(d).go();}function fbpage_toggle_like_on_fan_status_changed(a,b){var c=$('liked_pages_like_action_'+a),d=$('liked_pages_undo_action_'+a);CSS.conditionClass(c,'hidden_elem',b);CSS.conditionClass(d,'hidden_elem',!b);}function fbpage_inform_arbiter_on_change(a,b){if(window.PageLikeButton)if(b){PageLikeButton.informLike(a);PageLikeButton.informLikeSuccess(a);}else PageLikeButton.informUnlike(a);}
__d("TinyViewport",["event-extensions","CSS","DOM","debounce"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('debounce'),j=i(function(){var k=document.documentElement,l=h.getDocumentScrollElement(),m=k.clientHeight<400||l.clientWidth<l.scrollWidth;g.conditionClass(k,'tinyViewport',m);g.conditionClass(k,'canHaveFixedElements',!m);});j();Event.listen(window,'resize',j);});
__d("legacy:Toggler",["Toggler"],function(a,b,c,d){a.Toggler=b('Toggler');},3);
__d("legacy:Button",["Button"],function(a,b,c,d){a.Button=b('Button');},3);
__d("FormDisableOnSubmit",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._form=i;}g(h.prototype,{_subscription:null,_disabled:false,enable:function(){this._subscription=this._form.subscribe(['submit','reset'],this._handle.bind(this));},disable:function(){this._form.unsubscribe(this._subscription);this._subscription=null;},_handle:function(i,j){if(i=='submit'){if(this._disabled)return false;this._disabled=true;return true;}this._disabled=false;}});e.exports=h;});
__d("FormSubmitOnChange",["event-extensions","copyProperties","submitForm"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('submitForm');function i(j){this._form=j;}g(i.prototype,{_listener:null,enable:function(){this._listener=Event.listen(this._form.getRoot(),'change',this._submit.bind(this));},disable:function(){this._listener.remove();this._listener=null;},_submit:function(){h(this._form.getRoot());}});e.exports=i;});
__d("UIForm",["event-extensions","ArbiterMixin","BehaviorsMixin","Class","DOM","Form","FormDisableOnSubmit","FormSubmitOnChange","Run","areObjectsEqual","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('Class'),j=b('DOM'),k=b('Form'),l=b('FormDisableOnSubmit'),m=b('FormSubmitOnChange'),n=b('Run'),o=b('areObjectsEqual'),p=b('copyProperties');function q(r,s,t,u){this._root=r;this.controller=r;this._message=s;n.onAfterLoad(function(){this._originalState=k.serialize(this._root);}.bind(this));this._forceDirty=t;this._submitted=false;Event.listen(this._root,'submit',this._handleSubmit.bind(this));if(u&&u.length)this.enableBehaviors(u);var v=true;n.onBeforeUnload(this.checkUnsaved.bind(this),v);}p(q.prototype,g,h,{getRoot:function(){return this._root;},_handleSubmit:function(){if(this.inform('submit')===false)return false;this._submitted=true;return true;},reset:function(){this.inform('reset');this._submitted=false;},isDirty:function(){if(this._submitted||!j.contains(document.body,this._root))return false;if(this._forceDirty)return true;var r=k.serialize(this._root);return !o(r,this._originalState);},checkUnsaved:function(){if(this.isDirty())return this._message;return null;}});e.exports=a.UIForm||q;});
__d("legacy:Selector",["Selector"],function(a,b,c,d){a.Selector=b('Selector');},3);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);